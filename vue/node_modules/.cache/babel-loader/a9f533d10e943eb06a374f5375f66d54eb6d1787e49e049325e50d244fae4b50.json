{"ast":null,"code":"import dayjs from \"dayjs\";\nimport { damageReported } from \"@/api/damage/damage.js\";\nexport default {\n  name: 'Content-DamageReported',\n  data() {\n    return {\n      // 列表\n      tableData: [{\n        date: '2023-07-02 03:29:33',\n        people: '王小虎',\n        name: '物品名字',\n        id: 1,\n        tag: '未处理'\n      }, {\n        date: '2023-07-04 03:29:33',\n        people: '王小虎',\n        name: '物品名字',\n        id: 1,\n        tag: '未同意'\n      }, {\n        date: '2023-07-01 03:29:33',\n        people: '王小虎',\n        name: '物品名字',\n        id: 1,\n        tag: '已同理未处理'\n      }, {\n        date: '2023-07-03 03:29:33',\n        people: '王小虎',\n        name: '物品名字',\n        id: 1,\n        tag: '已处理'\n      }],\n      // 损坏物品信息\n      items: {\n        goodsPeople: '',\n        // 上报人：用户自己\n        goodsId: '',\n        // 上报物品id\n        goodsName: '',\n        // 上报物品名称\n        goodsProblem: '',\n        // 上报损坏描述\n        goodsTime: '',\n        // 上报时间\n\n        // 上报列表\n        goodsTag: '' // 处理状态\n      },\n\n      // 控制弹窗\n      dialogFormVisible: false,\n      // 添加物品规则\n      rules: {\n        goodsId: [{\n          required: true,\n          message: '请输入物品id',\n          trigger: 'blur'\n        }],\n        goodsName: [{\n          required: true,\n          message: '请输入物品名称',\n          trigger: 'blur'\n        }],\n        goodsProblem: [{\n          required: true,\n          message: '请输入损坏描述',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    // 上报提交接口\n    async postDamageReported(items) {\n      let res = await damageReported({\n        items\n      });\n      console.log(\"上报提交-----\", res.data);\n    },\n    // 上报提交\n    submitForm(items) {\n      this.$refs.items.validate(valid => {\n        if (valid) {\n          console.log(\"validate-----\", this.$refs.items);\n          this.goodsTime = dayjs(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\");\n          this.postDamageReported(this.items);\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    // 上报列表弹窗展开\n    reportedList() {\n      this.dialogFormVisible = true;\n    },\n    // 上报列表函数\n    formatter(row, column) {\n      return row.name;\n    },\n    filterTag(value, row) {\n      return row.tag === value;\n    },\n    clearFilter() {\n      this.$refs.filterTable.clearFilter();\n    },\n    // 状态颜色判断\n    tagColor(scope) {\n      if (scope.row.tag === \"未处理\") {\n        return \"info\";\n      } else if (scope.row.tag === \"未同意\") {\n        return \"danger\";\n      } else if (scope.row.tag === \"已同理未处理\") {\n        return \"warning\";\n      } else if (scope.row.tag === \"已处理\") {\n        return \"success\";\n      }\n    }\n  }\n};","map":{"version":3,"names":["dayjs","damageReported","name","data","tableData","date","people","id","tag","items","goodsPeople","goodsId","goodsName","goodsProblem","goodsTime","goodsTag","dialogFormVisible","rules","required","message","trigger","methods","postDamageReported","res","console","log","submitForm","$refs","validate","valid","Date","now","format","reportedList","formatter","row","column","filterTag","value","clearFilter","filterTable","tagColor","scope"],"sources":["src/views/product/fixed/item/DamageReported.vue"],"sourcesContent":["<template>\r\n  <div class=\"damageReported\">\r\n    \r\n    <div class=\"itemsText\">\r\n      <p class=\"itemsTextP\">物品损坏上报</p>\r\n    </div>\r\n\r\n    <!-- 上报页面 -->\r\n    <div class=\"damageReportedInner\">\r\n      <el-form :model=\"items\" :rules=\"rules\" ref=\"items\" class=\"demo-ruleForm\">\r\n        <el-form-item label=\"物品id(请输入数字)\" prop=\"goodsId\">\r\n          <el-input v-model.number=\"items.goodsId\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"物品名称\" prop=\"goodsName\">\r\n          <el-input v-model=\"items.goodsName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"损坏描述\" prop=\"goodsProblem\">\r\n          <el-input type=\"textarea\" v-model=\"items.goodsProblem\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"damageReportedButton\">\r\n        <el-button type=\"primary\" @click=\"submitForm()\">上 报</el-button>\r\n        <el-button type=\"success\" round class=\"reportedList\" @click=\"reportedList()\">上报列表</el-button>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <!-- 上报列表弹窗 -->\r\n    <el-dialog title=\"上报列表\" :visible.sync=\"dialogFormVisible\" :append-to-body=\"true\" class=\"itemsDialog\">\r\n      \r\n      <template>\r\n        <el-button @click=\"clearFilter\">重置过滤器</el-button>\r\n        <el-table\r\n          ref=\"filterTable\"\r\n          :data=\"tableData\"\r\n          style=\"width: 100%\">\r\n          <el-table-column\r\n            prop=\"date\"\r\n            label=\"日期\"\r\n            sortable\r\n            width=\"180\"\r\n            column-key=\"date\"\r\n          >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"people\"\r\n            label=\"上报人\"\r\n            width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"id\"\r\n            label=\"物品id\"\r\n            >\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"name\"\r\n            label=\"物品名称\"\r\n            :formatter=\"formatter\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"tag\"\r\n            label=\"标签\"\r\n            width=\"100\"\r\n            :filters=\"[{ text: '未处理', value: '未处理' }, { text: '未同意', value: '未同意' }, { text: '已同理未处理', value: '已同理未处理' }, { text: '已处理', value: '已处理' }]\"\r\n            :filter-method=\"filterTag\"\r\n            filter-placement=\"bottom-end\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag\r\n                :type=\"tagColor(scope)\"\r\n                disable-transitions>{{scope.row.tag}}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </template>\r\n        \r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">关 闭</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport dayjs from \"dayjs\"\r\nimport { damageReported } from \"@/api/damage/damage.js\"\r\nexport default {\r\n  name: 'Content-DamageReported',\r\n\r\n  data() {\r\n    return {\r\n      // 列表\r\n      tableData: [{\r\n        date: '2023-07-02 03:29:33',\r\n        people: '王小虎',\r\n        name: '物品名字',\r\n        id: 1,\r\n        tag: '未处理'\r\n      }, {\r\n        date: '2023-07-04 03:29:33',\r\n        people: '王小虎',\r\n        name: '物品名字',\r\n        id: 1,\r\n        tag: '未同意'\r\n      }, {\r\n        date: '2023-07-01 03:29:33',\r\n        people: '王小虎',\r\n        name: '物品名字',\r\n        id: 1,\r\n        tag: '已同理未处理'\r\n      }, {\r\n        date: '2023-07-03 03:29:33',\r\n        people: '王小虎',\r\n        name: '物品名字',\r\n        id: 1,\r\n        tag: '已处理'\r\n      }],\r\n      // 损坏物品信息\r\n      items: {\r\n        goodsPeople:'',     // 上报人：用户自己\r\n        goodsId: '',        // 上报物品id\r\n        goodsName: '',      // 上报物品名称\r\n        goodsProblem: '',   // 上报损坏描述\r\n        goodsTime: '',      // 上报时间\r\n\r\n        // 上报列表\r\n        goodsTag: '',     // 处理状态\r\n      },\r\n      // 控制弹窗\r\n      dialogFormVisible: false,\r\n      // 添加物品规则\r\n      rules: {\r\n        goodsId: [\r\n          { required: true, message: '请输入物品id', trigger: 'blur' },\r\n        ],\r\n        goodsName: [\r\n          { required: true, message: '请输入物品名称', trigger: 'blur' },\r\n        ],\r\n        goodsProblem: [\r\n          { required: true, message: '请输入损坏描述', trigger: 'blur' }\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 上报提交接口\r\n    async postDamageReported(items){\r\n      let res = await damageReported({items})\r\n      console.log(\"上报提交-----\",res.data);\r\n    },\r\n    // 上报提交\r\n    submitForm(items) {\r\n      this.$refs.items.validate((valid) => {\r\n        if (valid) {\r\n          console.log(\"validate-----\",this.$refs.items);\r\n          this.goodsTime = dayjs(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\");\r\n          this.postDamageReported(this.items)\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 上报列表弹窗展开\r\n    reportedList(){\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 上报列表函数\r\n    formatter(row, column) {\r\n      return row.name;\r\n    },\r\n    filterTag(value, row) {\r\n      return row.tag === value;\r\n    },\r\n    clearFilter() {\r\n      this.$refs.filterTable.clearFilter();\r\n    },\r\n    // 状态颜色判断\r\n    tagColor(scope){\r\n      if(scope.row.tag === \"未处理\"){\r\n        return \"info\"\r\n      } else if(scope.row.tag === \"未同意\"){\r\n        return \"danger\"\r\n      } else if(scope.row.tag === \"已同理未处理\"){\r\n        return \"warning\"\r\n      } else if(scope.row.tag === \"已处理\"){\r\n        return \"success\"\r\n      } \r\n    },\r\n\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .damageReported{\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    background-color: rgba(255, 255, 255, 0.6);\r\n  }\r\n  .itemsText{\r\n    font-size: 38px;\r\n    margin-bottom: 20px;\r\n    padding-top: 2px;\r\n    padding-bottom: 3px;\r\n    background-color: #e0dbdb;\r\n    font-weight: bold;\r\n    color: gray;\r\n    text-align: center;\r\n    position: fixed;\r\n    width: 100%;\r\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;\r\n    z-index: 1;\r\n  }\r\n  .damageReportedInner{\r\n    width: 60%;\r\n    height: 100%;\r\n    font-size: 25px;\r\n    margin: 60px auto;\r\n  }\r\n  .reportedList{\r\n    position: fixed;\r\n    right: 20%;\r\n  }\r\n  .dialog-footer{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n</style>"],"mappings":"AAqFA,OAAAA,KAAA;AACA,SAAAC,cAAA;AACA;EACAC,IAAA;EAEAC,KAAA;IACA;MACA;MACAC,SAAA;QACAC,IAAA;QACAC,MAAA;QACAJ,IAAA;QACAK,EAAA;QACAC,GAAA;MACA;QACAH,IAAA;QACAC,MAAA;QACAJ,IAAA;QACAK,EAAA;QACAC,GAAA;MACA;QACAH,IAAA;QACAC,MAAA;QACAJ,IAAA;QACAK,EAAA;QACAC,GAAA;MACA;QACAH,IAAA;QACAC,MAAA;QACAJ,IAAA;QACAK,EAAA;QACAC,GAAA;MACA;MACA;MACAC,KAAA;QACAC,WAAA;QAAA;QACAC,OAAA;QAAA;QACAC,SAAA;QAAA;QACAC,YAAA;QAAA;QACAC,SAAA;QAAA;;QAEA;QACAC,QAAA;MACA;;MACA;MACAC,iBAAA;MACA;MACAC,KAAA;QACAN,OAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAR,SAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,YAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACA;IACA,MAAAC,mBAAAb,KAAA;MACA,IAAAc,GAAA,SAAAtB,cAAA;QAAAQ;MAAA;MACAe,OAAA,CAAAC,GAAA,cAAAF,GAAA,CAAApB,IAAA;IACA;IACA;IACAuB,WAAAjB,KAAA;MACA,KAAAkB,KAAA,CAAAlB,KAAA,CAAAmB,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAL,OAAA,CAAAC,GAAA,uBAAAE,KAAA,CAAAlB,KAAA;UACA,KAAAK,SAAA,GAAAd,KAAA,CAAA8B,IAAA,CAAAC,GAAA,IAAAC,MAAA;UACA,KAAAV,kBAAA,MAAAb,KAAA;QACA;UACAe,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACA;IACAQ,aAAA;MACA,KAAAjB,iBAAA;IACA;IACA;IACAkB,UAAAC,GAAA,EAAAC,MAAA;MACA,OAAAD,GAAA,CAAAjC,IAAA;IACA;IACAmC,UAAAC,KAAA,EAAAH,GAAA;MACA,OAAAA,GAAA,CAAA3B,GAAA,KAAA8B,KAAA;IACA;IACAC,YAAA;MACA,KAAAZ,KAAA,CAAAa,WAAA,CAAAD,WAAA;IACA;IACA;IACAE,SAAAC,KAAA;MACA,IAAAA,KAAA,CAAAP,GAAA,CAAA3B,GAAA;QACA;MACA,WAAAkC,KAAA,CAAAP,GAAA,CAAA3B,GAAA;QACA;MACA,WAAAkC,KAAA,CAAAP,GAAA,CAAA3B,GAAA;QACA;MACA,WAAAkC,KAAA,CAAAP,GAAA,CAAA3B,GAAA;QACA;MACA;IACA;EAGA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}