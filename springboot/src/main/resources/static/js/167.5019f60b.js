(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[167],{9654:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkItems"},[t._m(0),e("el-button",{staticClass:"itemsButton",attrs:{type:"text"},on:{click:t.itemsButton}},[t._v("添加新物品")]),e("el-dialog",{staticClass:"itemsDialog",attrs:{title:t.dialogFormVisibleTitle,visible:t.dialogFormVisibleAdd,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisibleAdd=e}}},[e("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:t.items,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"物品名称",prop:"goodsName"}},[e("el-input",{model:{value:t.items.goodsName,callback:function(e){t.$set(t.items,"goodsName",e)},expression:"items.goodsName"}})],1),e("el-form-item",{attrs:{label:"物品数量",prop:"goodsQuantity"}},[e("el-input",{model:{value:t.items.goodsQuantity,callback:function(e){t.$set(t.items,"goodsQuantity",t._n(e))},expression:"items.goodsQuantity"}})],1),e("el-form-item",{attrs:{label:"物品状态",prop:"goodsState"}},[e("el-radio-group",{model:{value:t.items.goodsState,callback:function(e){t.$set(t.items,"goodsState",e)},expression:"items.goodsState"}},[e("el-radio",{attrs:{label:"未损坏"}}),e("el-radio",{attrs:{label:"已损坏"}})],1)],1),e("el-form-item",{attrs:{label:"上传图片(限定一张)",prop:"goodsImage"}},[e("el-upload",{ref:"upload",staticClass:"itemsImg",attrs:{drag:"","auto-upload":!1,limit:1,action:"null","list-type":"picture","file-list":t.files,"on-change":t.changeFile}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将物品照片拖到此处，或"),e("em",[t._v("点击上传")])]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件,且不超过500kb")])])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitButton("items")}}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.dialogFormVisibleAdd=!1}}},[t._v("取 消")])],1)],1),e("el-dialog",{staticClass:"itemsDialog",attrs:{title:t.dialogFormVisibleTitle,visible:t.dialogFormVisibleEdit,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisibleEdit=e}}},[e("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:t.items,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.items.goodsId,callback:function(e){t.$set(t.items,"goodsId",e)},expression:"items.goodsId"}})],1),e("el-form-item",{attrs:{label:"物品名称",prop:"goodsName"}},[e("el-input",{model:{value:t.items.goodsName,callback:function(e){t.$set(t.items,"goodsName",e)},expression:"items.goodsName"}})],1),e("el-form-item",{attrs:{label:"物品状态",prop:"goodsState"}},[e("el-radio-group",{model:{value:t.items.goodsState,callback:function(e){t.$set(t.items,"goodsState",e)},expression:"items.goodsState"}},[e("el-radio",{attrs:{label:"未损坏"}}),e("el-radio",{attrs:{label:"已损坏"}})],1)],1),e("el-form-item",{attrs:{label:"上传图片(限定一张)",prop:"goodsImage"}},[e("el-upload",{ref:"upload",staticClass:"itemsImg",attrs:{drag:"","auto-upload":!1,limit:1,action:"null","list-type":"picture","file-list":t.files,"on-change":t.changeFile}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将物品照片拖到此处，或"),e("em",[t._v("点击上传")])])])],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editClickButton("items")}}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.dialogFormVisibleEdit=!1}}},[t._v("取 消")])],1)],1),e("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:t.dialogFormVisibleReported,"append-to-body":!0},on:{"update:visible":function(e){t.dialogFormVisibleReported=e}}},[e("el-form",{ref:"report",staticClass:"demo-ruleForm",attrs:{model:t.report,rules:t.rules}},[e("el-form-item",{attrs:{label:"上报人id",prop:"reportNameId"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.report.reportNameId,callback:function(e){t.$set(t.report,"reportNameId",e)},expression:"report.reportNameId"}})],1),e("el-form-item",{attrs:{label:"上报人姓名",prop:"reportName"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.report.reportName,callback:function(e){t.$set(t.report,"reportName",t._n(e))},expression:"report.reportName"}})],1),e("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[e("el-input",{attrs:{disabled:!0},model:{value:t.report.goodsId,callback:function(e){t.$set(t.report,"goodsId",t._n(e))},expression:"report.goodsId"}})],1),e("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.report.damageDescription,callback:function(e){t.$set(t.report,"damageDescription",e)},expression:"report.damageDescription"}})],1),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitFormReport("rules")}}},[t._v("上 报")])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisibleReported=!1}}},[t._v("关 闭")])],1)],1),e("div",{staticClass:"checkItemsInner"},[e("div",{staticClass:"checkItemsInnerHeader"},[e("div",{staticClass:"inputDiv"},[e("el-input",{attrs:{size:"mini",placeholder:"物品id搜索(回车)"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchByGoodsIdFunc.apply(null,arguments)}},model:{value:t.searchByGoodsId,callback:function(e){t.searchByGoodsId=t._n(e)},expression:"searchByGoodsId"}})],1),e("div",{staticClass:"inputDiv"},[e("el-input",{attrs:{size:"mini",placeholder:"物品名搜索(回车)"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchByGoodsNameFunc.apply(null,arguments)}},model:{value:t.searchByGoodsName,callback:function(e){t.searchByGoodsName="string"===typeof e?e.trim():e},expression:"searchByGoodsName"}})],1),e("el-button",{staticClass:"seeAll",attrs:{type:"primary",round:""},on:{click:t.seeAll}},[t._v("查看全部")])],1),e("el-table",{staticClass:"itemsTable",attrs:{data:t.tableData,border:"",align:"center","header-cell-style":{"text-align":"center"}}},[e("el-table-column",{attrs:{width:"100px",prop:"goodsId",label:"物品id",align:"center"}}),e("el-table-column",{attrs:{prop:"goodsImage",label:"物品照片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"200px","max-height":"200px","object-fit":"contain"},attrs:{src:t.row.goodsImage}})]}}])}),e("el-table-column",{attrs:{width:"100px",prop:"goodsName",label:"物品名称",align:"center"}}),e("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsState",label:"物品状态",filters:[{text:"未损坏",value:"未损坏"},{text:"已损坏",value:"已损坏"}],"filter-method":t.filterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:"未损坏"===o.row.goodsState?"info":"danger","disable-transitions":""}},[t._v(t._s(o.row.goodsState))])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.damageReportFromItems(o.$index,o.row)}}},[t._v("损坏上报")]),e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.editClick(o.$index,o.row)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.removeClick(o.$index,o.row)}}},[t._v("删除")])]}}])})],1)],1),e("div",{staticClass:"pagination"},[e("Pagination",{attrs:{total:t.total,pageSize:t.pageSize,totalPages:t.totalPages},on:{currentChange:t.currentChange}})],1)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"itemsText"},[e("p",{staticClass:"itemsTextP"},[t._v("物品展示")])])}],i=(o(6229),o(7330),o(2062),o(4615)),r=o(4458),l=o(454),n=o(6854),d={name:"Content-CheckItems",components:{Pagination:r.Z},data(){return{formLabelWidth:"120px",tableData:[],dialogFormVisibleAdd:!1,dialogFormVisibleEdit:!1,dialogFormVisibleTitle:"",items:{goodsId:"",goodsName:"",goodsQuantity:"",goodsState:"",goodsImage:""},report:{reportNameId:"",reportName:"",goodsId:"",damageDescription:""},searchByGoodsName:"",searchByGoodsId:"",dialogFormVisibleReported:!1,fileList:[],files:[],imageOK:!1,rules:{goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],goodsQuantity:[{required:!0,message:"请输入物品数量",trigger:"blur"}],goodsState:[{required:!0,message:"请选择物品状态",trigger:"change"}],goodsImage:[{required:!0,message:"请上传图片",trigger:"change"}]},total:0,totalPages:10,pageSize:5,pageNum:1}},methods:{async getItemsList(t,e){let o=await(0,l.aU)({pageNum:t,pageSize:e});console.log("产品列表数据-----",o),o.data?(this.tableData=[...o.data.data.list],this.total=o.data.data.total,this.totalPages=o.data.totalPages,this.tableData.forEach(((t,e)=>{t.goodsImage="data:image/png;base64,"+o.data.responseEntityList[e].body}))):(this.tableData=[],this.total=0,this.totalPages=0)},async postItemsAdd(t){let e=await(0,l.lt)({formData:t});console.log("增加产品列表-----",e),201===e.status&&(this.$message({type:"success",message:"添加成功咯!"}),this.dialogFormVisibleAdd=!1,this.getItemsList(1,this.pageSize))},async postDamageReported(t){let e=await(0,n.K$)({items:t});console.log("上报提交-----",e),201===e.status&&(this.$message({type:"success",message:"上报成功咯!"}),this.dialogFormVisibleReported=!1,this.report.goodsId="",this.report.damageDescription="",this.getItemsList(1,this.pageSize))},async postItemsEdit(t){let e=await(0,l.xg)({formData:t});console.log("修改产品列表-----",e),200===e.status&&(this.$message({type:"success",message:"修改成功咯!"}),this.dialogFormVisibleEdit=!1,this.getItemsList(this.pageNum,this.pageSize))},async getItemsRemove(t){let e=await(0,l.qQ)({goodsId:t});console.log("产品删除数据-----",e),200===e.status&&(this.$message({type:"success",message:"删除成功咯!"}),this.getItemsList(1,this.pageSize))},async getSearchByGoodsNameFunc(t,e,o){let s=await(0,l.S_)({pageNum:t,pageSize:e,goodsName:o});console.log("物品名字搜索数据-----",s),s.data?(this.tableData=[...s.data.data.list],this.tableData.forEach(((t,e)=>{t.goodsImage="data:image/png;base64,"+s.data.responseEntityList[e].body})),this.total=s.data.data.total,this.totalPages=s.data.totalPages,this.pageNum=1):(this.tableData=[],this.total=0,this.totalPages=0)},async getSearchByGoodsIdFunc(t){let e=await(0,l.zw)({goodsId:t});console.log("物品id搜索数据-----",e),e.data?(console.log("id赋值"),this.tableData=[...e.data.data.list],this.tableData.forEach(((t,o)=>{t.goodsImage="data:image/png;base64,"+e.data.responseEntityList[o].body})),this.total=1,this.totalPages=1,this.pageNum=1):(this.tableData=[],this.total=0,this.totalPages=0)},currentChange(t){console.log("更新页码-----",t),this.pageNum=t,this.getItemsList(t,this.pageSize)},damageReportFromItems(t,e){console.log("上报弹窗展开",t,e),this.dialogFormVisibleReported=!0,this.report.goodsId=e.goodsId},submitFormReport(){this.$refs.report.validate((t=>{if(!t)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.report),this.postDamageReported(this.report)}))},editClick(t,e){console.log("修改操作-----",t,e),this.dialogFormVisibleEdit=!0,this.dialogFormVisibleTitle="修改物品数据",this.items.goodsId=e.goodsId,this.items.goodsName=e.goodsName,this.items.goodsState=e.goodsState},editClickButton(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;console.log("修改操作的确认-----",this.items),this.submitFormEdit()}))},removeClick(t,e){console.log("删除操作-----",t,e),this.$confirm("此操作将删除该物品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getItemsRemove(e.goodsId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},itemsButton(){this.dialogFormVisibleAdd=!0,this.dialogFormVisibleTitle="添加新物品",this.items.goodsName="",this.items.goodsState="",this.items.goodsQuantity=""},submitButton(){this.$refs.items.validate((t=>{if(!t)return console.log("error submit!!"),!1;console.log("提交新物品操作-----",this.items),this.submitFormAdd()}))},changeFile(t,e){const o="image/jpg"===t.raw.type||"image/png"===t.raw.type,s=t.raw.size/1024/1024<1;o?s?(console.log("图片符合要求"),this.items.goodsImage=URL.createObjectURL(t.raw),this.imageOK=!0,console.log("fileList",e),this.fileList=e):(this.$message.error("上传图片大小不能超过1MB"),this.items.goodsImage=""):(this.$message.error("上传图片只能为png格式"),this.items.goodsImage="")},submitFormAdd(){let t=new window.FormData;this.items.goodsImage=this.fileList[0].raw,t.append("uploadImage",this.fileList[0].raw),t.append("goodsName",this.items.goodsName),t.append("goodsState",this.items.goodsState),t.append("goodsQuantity",this.items.goodsQuantity),console.log("formData的uploadImage",t.get("uploadImage")),this.postItemsAdd(t)},submitFormEdit(){let t=new window.FormData;this.imageOK&&(this.items.goodsImage=this.fileList[0].raw,t.append("uploadImage",this.fileList[0].raw),t.append("goodsId",this.items.goodsId),t.append("goodsName",this.items.goodsName),t.append("goodsState",this.items.goodsState),console.log("formData的uploadImage",t.get("uploadImage")),this.postItemsEdit(t))},searchByGoodsNameFunc:(0,i.Z)((function(){this.searchByGoodsName&&(console.log("我要搜索咯-----",this.searchByGoodsName),this.getSearchByGoodsNameFunc(this.pageNum,this.pageSize,this.searchByGoodsName))}),300),searchByGoodsIdFunc:(0,i.Z)((function(){this.searchByGoodsId&&(console.log("我要搜索咯-----",this.searchByGoodsId),this.getSearchByGoodsIdFunc(this.searchByGoodsId))}),300),seeAll(){this.getItemsList(1,this.pageSize),this.searchByGoodsName="",this.searchByGoodsId=""},filterTag(t,e){return e.goodsState===t}},created(){this.getItemsList(1,this.pageSize)},mounted(){this.report.reportName=this.$store.state.login.name,this.report.reportNameId=Number(this.$store.state.login.id)}},g=d,m=o(1001),p=(0,m.Z)(g,s,a,!1,null,"3eb99319",null),c=p.exports},648:function(t,e,o){var s=o(1694),a=o(614),i=o(4326),r=o(5112),l=r("toStringTag"),n=Object,d="Arguments"==i(function(){return arguments}()),g=function(t,e){try{return t[e]}catch(o){}};t.exports=s?i:function(t){var e,o,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(o=g(e=n(t),l))?o:d?i(e):"Object"==(s=i(e))&&a(e.callee)?"Arguments":s}},7045:function(t,e,o){var s=o(6339),a=o(3070);t.exports=function(t,e,o){return o.get&&s(o.get,e,{getter:!0}),o.set&&s(o.set,e,{setter:!0}),a.f(t,e,o)}},1694:function(t,e,o){var s=o(5112),a=s("toStringTag"),i={};i[a]="z",t.exports="[object z]"===String(i)},1340:function(t,e,o){var s=o(648),a=String;t.exports=function(t){if("Symbol"===s(t))throw TypeError("Cannot convert a Symbol value to a string");return a(t)}},8053:function(t){var e=TypeError;t.exports=function(t,o){if(t<o)throw e("Not enough arguments");return t}},6229:function(t,e,o){"use strict";var s=o(8052),a=o(1702),i=o(1340),r=o(8053),l=URLSearchParams,n=l.prototype,d=a(n.append),g=a(n["delete"]),m=a(n.forEach),p=a([].push),c=new l("a=1&a=2");c["delete"]("a",1),c+""!=="a=2"&&s(n,"delete",(function(t){var e=arguments.length,o=e<2?void 0:arguments[1];if(e&&void 0===o)return g(this,t);var s=[];m(this,(function(t,e){p(s,{key:e,value:t})})),r(e,1);var a,l=i(t),n=i(o),c=0,u=0,h=!1,f=s.length;while(c<f)a=s[c++],h||a.key===l?(h=!0,g(this,a.key)):u++;while(u<f)a=s[u++],a.key===l&&a.value===n||d(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},7330:function(t,e,o){"use strict";var s=o(8052),a=o(1702),i=o(1340),r=o(8053),l=URLSearchParams,n=l.prototype,d=a(n.getAll),g=a(n.has),m=new l("a=1");m.has("a",2)&&s(n,"has",(function(t){var e=arguments.length,o=e<2?void 0:arguments[1];if(e&&void 0===o)return g(this,t);var s=d(this,t);r(e,1);var a=i(o),l=0;while(l<s.length)if(s[l++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:function(t,e,o){"use strict";var s=o(9781),a=o(1702),i=o(7045),r=URLSearchParams.prototype,l=a(r.forEach);s&&!("size"in r)&&i(r,"size",{get:function(){var t=0;return l(this,(function(){t++})),t},configurable:!0,enumerable:!0})},6854:function(t,e,o){"use strict";o.d(e,{Hv:function(){return r},K$:function(){return n},nq:function(){return d},uQ:function(){return l},up:function(){return i}});var s=o(4974);o(129);const a="/admin/admReport",i=({pageNum:t,pageSize:e})=>s.Z.get(a+"/getALLReport",{params:{pageNum:t,pageSize:e}}),r=({pageNum:t,pageSize:e,reportName:o})=>s.Z.get(a+"/selectByReportName",{params:{pageNum:t,pageSize:e,reportName:o}}),l=({pageNum:t,pageSize:e,disposeName:o})=>s.Z.get(a+"/selectByDisposeName",{params:{pageNum:t,pageSize:e,disposeName:o}}),n=({items:t})=>s.Z.get(a+"/addReport",{params:{reportNameId:t.reportNameId,reportName:t.reportName,goodsId:t.goodsId,damageDescription:t.damageDescription}}),d=({sequenceId:t})=>s.Z.get(a+"/deleteReport",{params:{sequenceId:t}})},454:function(t,e,o){"use strict";o.d(e,{S_:function(){return g},aU:function(){return l},lt:function(){return n},qQ:function(){return p},xg:function(){return d},zw:function(){return m}});var s=o(4974),a=o(129),i=o.n(a);const r="/admin/admgoods",l=({pageNum:t,pageSize:e})=>s.Z.post(r+"/getAllGoods",i().stringify({pageNum:t,pageSize:e}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),n=({formData:t})=>s.Z.post(r+"/addGoods",{uploadImage:t.get("uploadImage"),goodsName:t.get("goodsName"),goodsQuantity:t.get("goodsQuantity"),goodsState:t.get("goodsState")},{headers:{"Content-type":"multipart/form-data"}}),d=({formData:t})=>s.Z.post(r+"/updateGoods",{uploadImage:t.get("uploadImage"),goodsId:t.get("goodsId"),goodsName:t.get("goodsName"),goodsState:t.get("goodsState")},{headers:{"Content-type":"multipart/form-data"}}),g=({pageNum:t,pageSize:e,goodsName:o})=>s.Z.post(r+"/selectGoodsByGoodsName",i().stringify({pageNum:t,pageSize:e,goodsName:o}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),m=({goodsId:t})=>s.Z.post(r+"/selectGoodsById",i().stringify({goodsId:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),p=({goodsId:t})=>s.Z.get(r+"/deleteGoods",{params:{goodsId:t}})}}]);
//# sourceMappingURL=167.5019f60b.js.map