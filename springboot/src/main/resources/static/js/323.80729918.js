(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[323],{3557:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"checkItems"},[e._m(0),t("el-button",{staticClass:"itemsButton",attrs:{type:"text"},on:{click:e.itemsButton}},[e._v("添加新物品")]),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:e.dialogFormVisibleTitle,visible:e.dialogFormVisibleAdd,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"物品名称",prop:"goodsName"}},[t("el-input",{model:{value:e.items.goodsName,callback:function(t){e.$set(e.items,"goodsName",t)},expression:"items.goodsName"}})],1),t("el-form-item",{attrs:{label:"物品数量",prop:"goodsQuantity"}},[t("el-input",{model:{value:e.items.goodsQuantity,callback:function(t){e.$set(e.items,"goodsQuantity",e._n(t))},expression:"items.goodsQuantity"}})],1),t("el-form-item",{attrs:{label:"物品状态",prop:"goodsState"}},[t("el-radio-group",{model:{value:e.items.goodsState,callback:function(t){e.$set(e.items,"goodsState",t)},expression:"items.goodsState"}},[t("el-radio",{attrs:{label:"未损坏"}}),t("el-radio",{attrs:{label:"已损坏"}})],1)],1),t("el-form-item",{attrs:{label:"上传图片(限定一张)",prop:"goodsImage"}},[t("el-upload",{ref:"upload",staticClass:"itemsImg",attrs:{drag:"","auto-upload":!1,limit:1,action:"null","list-type":"picture","file-list":e.files,"on-change":e.changeFile}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将物品照片拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件,且不超过500kb")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitButton("items")}}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.dialogFormVisibleAdd=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:e.dialogFormVisibleTitle,visible:e.dialogFormVisibleEdit,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisibleEdit=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",t)},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"物品名称",prop:"goodsName"}},[t("el-input",{model:{value:e.items.goodsName,callback:function(t){e.$set(e.items,"goodsName",t)},expression:"items.goodsName"}})],1),t("el-form-item",{attrs:{label:"物品状态",prop:"goodsState"}},[t("el-radio-group",{model:{value:e.items.goodsState,callback:function(t){e.$set(e.items,"goodsState",t)},expression:"items.goodsState"}},[t("el-radio",{attrs:{label:"未损坏"}}),t("el-radio",{attrs:{label:"已损坏"}})],1)],1),t("el-form-item",{attrs:{label:"上传图片(限定一张)",prop:"goodsImage"}},[t("el-upload",{ref:"upload",staticClass:"itemsImg",attrs:{drag:"","auto-upload":!1,limit:1,action:"null","list-type":"picture","file-list":e.files,"on-change":e.changeFile}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将物品照片拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过1MB")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editClickButton("items")}}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.dialogFormVisibleEdit=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisibleReported,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisibleReported=t}}},[t("el-form",{ref:"report",staticClass:"demo-ruleForm",attrs:{model:e.report,rules:e.rules}},[t("el-form-item",{attrs:{label:"上报人id",prop:"reportNameId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.reportNameId,callback:function(t){e.$set(e.report,"reportNameId",t)},expression:"report.reportNameId"}})],1),t("el-form-item",{attrs:{label:"上报人姓名",prop:"reportName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.reportName,callback:function(t){e.$set(e.report,"reportName",e._n(t))},expression:"report.reportName"}})],1),t("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.goodsId,callback:function(t){e.$set(e.report,"goodsId",e._n(t))},expression:"report.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.report.damageDescription,callback:function(t){e.$set(e.report,"damageDescription",t)},expression:"report.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormReport("rules")}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleReported=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"checkItemsInner"},[t("div",{staticClass:"checkItemsInnerHeader"},[t("div",{staticClass:"inputDiv"},[t("el-input",{attrs:{size:"mini",placeholder:"物品名搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByGoodsNameFunc.apply(null,arguments)}},model:{value:e.searchByGoodsName,callback:function(t){e.searchByGoodsName="string"===typeof t?t.trim():t},expression:"searchByGoodsName"}})],1),t("div",{staticClass:"inputDiv"},[t("el-input",{attrs:{size:"mini",placeholder:"物品id搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByGoodsIdFunc.apply(null,arguments)}},model:{value:e.searchByGoodsId,callback:function(t){e.searchByGoodsId=e._n(t)},expression:"searchByGoodsId"}})],1),t("el-button",{staticClass:"seeAll",attrs:{type:"primary",round:""},on:{click:e.seeAll}},[e._v("查看全部")])],1),t("el-table",{staticClass:"itemsTable",attrs:{data:e.tableData,border:"",align:"center","header-cell-style":{"text-align":"center"}}},[t("el-table-column",{attrs:{width:"100px",prop:"goodsId",label:"物品id",align:"center"}}),t("el-table-column",{attrs:{prop:"goodsImage",label:"物品照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"200px","max-height":"200px","object-fit":"contain"},attrs:{src:e.row.goodsImage}})]}}])}),t("el-table-column",{attrs:{width:"100px",prop:"goodsName",label:"物品名称",align:"center"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsState",label:"物品状态",filters:[{text:"未损坏",value:"未损坏"},{text:"已损坏",value:"已损坏"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tag",{attrs:{type:"未损坏"===o.row.goodsState?"info":"danger","disable-transitions":""}},[e._v(e._s(o.row.goodsState))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.damageReportFromItems(o.$index,o.row)}}},[e._v("损坏上报")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.editClick(o.$index,o.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.removeClick(o.$index,o.row)}}},[e._v("删除")])]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,pageSize:e.pageSize,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品展示")])])}],i=(o(6229),o(7330),o(2062),o(4615)),r=o(4458),l=o(454),n=o(6854),d={name:"Content-CheckItems",components:{Pagination:r.Z},data(){return{formLabelWidth:"120px",tableData:[],dialogFormVisibleAdd:!1,dialogFormVisibleEdit:!1,dialogFormVisibleTitle:"",items:{goodsId:"",goodsName:"",goodsQuantity:"",goodsState:"",goodsImage:""},report:{reportNameId:"",reportName:"",goodsId:"",damageDescription:""},searchByGoodsName:"",searchByGoodsId:"",dialogFormVisibleReported:!1,fileList:[],files:[],imageOK:!1,rules:{goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],goodsQuantity:[{required:!0,message:"请输入物品数量",trigger:"blur"}],goodsState:[{required:!0,message:"请选择物品状态",trigger:"change"}],goodsImage:[{required:!0,message:"请上传图片",trigger:"change"}]},total:0,totalPages:10,pageSize:5,pageNum:1}},methods:{async getItemsList(e,t){let o=await(0,l.aU)({pageNum:e,pageSize:t});console.log("产品列表数据-----",o),o.data&&(this.tableData=[...o.data.data.list],this.total=o.data.data.total,this.totalPages=o.data.totalPages,this.tableData.forEach(((e,t)=>{e.goodsImage="data:image/png;base64,"+o.data.responseEntityList[t].body})))},async postItemsAdd(e){let t=await(0,l.lt)({formData:e});console.log("增加产品列表-----",t),201===t.status&&(this.$message({type:"success",message:"添加成功咯!"}),this.dialogFormVisibleAdd=!1,this.getItemsList(1,this.pageSize))},async postDamageReported(e){let t=await(0,n.K$)({items:e});console.log("上报提交-----",t),201===t.status&&(this.$message({type:"success",message:"上报成功咯!"}),this.dialogFormVisibleReported=!1,this.report.goodsId="",this.report.damageDescription="",this.getItemsList(1,this.pageSize))},async postItemsEdit(e){let t=await(0,l.xg)({formData:e});console.log("修改产品列表-----",t),200===t.status&&(this.$message({type:"success",message:"修改成功咯!"}),this.dialogFormVisibleEdit=!1,this.getItemsList(this.pageNum,this.pageSize))},async getItemsRemove(e){let t=await(0,l.qQ)({goodsId:e});console.log("产品删除数据-----",t),200===t.status&&(this.$message({type:"success",message:"删除成功咯!"}),this.getItemsList(1,this.pageSize))},async getSearchByGoodsNameFunc(e,t,o){let s=await(0,l.S_)({pageNum:e,pageSize:t,goodsName:o});console.log("物品名字搜索数据-----",s),s.list&&(this.tableData=[...s.data.data.list],this.tableData.forEach(((e,t)=>{e.goodsImage="data:image/png;base64,"+s.data.responseEntityList[t].body})),this.total=s.data.data.total,this.totalPages=s.data.totalPages,this.pageNum=1)},async getSearchByGoodsIdFunc(e){let t=await(0,l.zw)({goodsId:e});console.log("物品id搜索数据-----",t),t.list&&(this.tableData=[...t.data.data.list],this.tableData.forEach(((e,o)=>{e.goodsImage="data:image/png;base64,"+t.data.responseEntityList[o].body})),this.total=1,this.totalPages=1,this.pageNum=1)},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getItemsList(e,this.pageSize)},damageReportFromItems(e,t){console.log("上报弹窗展开",e,t),this.dialogFormVisibleReported=!0,this.report.goodsId=t.goodsId},submitFormReport(){this.$refs.report.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.report),this.postDamageReported(this.report)}))},editClick(e,t){console.log("修改操作-----",e,t),this.dialogFormVisibleEdit=!0,this.dialogFormVisibleTitle="修改物品数据",this.items.goodsId=t.goodsId,this.items.goodsName=t.goodsName,this.items.goodsState=t.goodsState},editClickButton(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("修改操作的确认-----",this.items),this.submitFormEdit()}))},removeClick(e,t){console.log("删除操作-----",e,t),this.$confirm("此操作将删除该物品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getItemsRemove(t.goodsId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},itemsButton(){this.dialogFormVisibleAdd=!0,this.dialogFormVisibleTitle="添加新物品",this.items.goodsName="",this.items.goodsState="",this.items.goodsQuantity=""},submitButton(){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("提交新物品操作-----",this.items),this.submitFormAdd()}))},changeFile(e,t){const o="image/jpg"===e.raw.type||"image/png"===e.raw.type,s=e.raw.size/1024/1024<1;o?s?(console.log("图片符合要求"),this.items.goodsImage=URL.createObjectURL(e.raw),this.imageOK=!0,console.log("fileList",t),this.fileList=t):(this.$message.error("上传图片大小不能超过1MB"),this.items.goodsImage=""):(this.$message.error("上传图片只能为jpg或png格式"),this.items.goodsImage="")},submitFormAdd(){let e=new window.FormData;this.items.goodsImage=this.fileList[0].raw,e.append("uploadImage",this.fileList[0].raw),e.append("goodsName",this.items.goodsName),e.append("goodsState",this.items.goodsState),e.append("goodsQuantity",this.items.goodsQuantity),console.log("formData的uploadImage",e.get("uploadImage")),this.postItemsAdd(e)},submitFormEdit(){let e=new window.FormData;this.imageOK&&(this.items.goodsImage=this.fileList[0].raw,e.append("uploadImage",this.fileList[0].raw),e.append("goodsId",this.items.goodsId),e.append("goodsName",this.items.goodsName),e.append("goodsState",this.items.goodsState),console.log("formData的uploadImage",e.get("uploadImage")),this.postItemsEdit(e))},searchByGoodsNameFunc:(0,i.Z)((function(){this.searchByGoodsName&&(console.log("我要搜索咯-----",this.searchByGoodsName),this.getSearchByGoodsNameFunc(this.pageNum,this.pageSize,this.searchByGoodsName))}),300),searchByGoodsIdFunc:(0,i.Z)((function(){this.searchByGoodsId&&(console.log("我要搜索咯-----",this.searchByGoodsId),this.getSearchByGoodsIdFunc(this.searchByGoodsId))}),300),seeAll(){this.getItemsList(1,this.pageSize),this.searchByGoodsName="",this.searchByGoodsId=""},filterTag(e,t){return t.goodsState===e}},created(){this.getItemsList(1,this.pageSize)},mounted(){this.report.reportName=this.$store.state.login.name,this.report.reportNameId=Number(this.$store.state.login.id)}},g=d,m=o(1001),p=(0,m.Z)(g,s,a,!1,null,"9338d432",null),u=p.exports},648:function(e,t,o){var s=o(1694),a=o(614),i=o(4326),r=o(5112),l=r("toStringTag"),n=Object,d="Arguments"==i(function(){return arguments}()),g=function(e,t){try{return e[t]}catch(o){}};e.exports=s?i:function(e){var t,o,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=g(t=n(e),l))?o:d?i(t):"Object"==(s=i(t))&&a(t.callee)?"Arguments":s}},7045:function(e,t,o){var s=o(6339),a=o(3070);e.exports=function(e,t,o){return o.get&&s(o.get,t,{getter:!0}),o.set&&s(o.set,t,{setter:!0}),a.f(e,t,o)}},1694:function(e,t,o){var s=o(5112),a=s("toStringTag"),i={};i[a]="z",e.exports="[object z]"===String(i)},1340:function(e,t,o){var s=o(648),a=String;e.exports=function(e){if("Symbol"===s(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},8053:function(e){var t=TypeError;e.exports=function(e,o){if(e<o)throw t("Not enough arguments");return e}},6229:function(e,t,o){"use strict";var s=o(8052),a=o(1702),i=o(1340),r=o(8053),l=URLSearchParams,n=l.prototype,d=a(n.append),g=a(n["delete"]),m=a(n.forEach),p=a([].push),u=new l("a=1&a=2");u["delete"]("a",1),u+""!=="a=2"&&s(n,"delete",(function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return g(this,e);var s=[];m(this,(function(e,t){p(s,{key:t,value:e})})),r(t,1);var a,l=i(e),n=i(o),u=0,c=0,h=!1,f=s.length;while(u<f)a=s[u++],h||a.key===l?(h=!0,g(this,a.key)):c++;while(c<f)a=s[c++],a.key===l&&a.value===n||d(this,a.key,a.value)}),{enumerable:!0,unsafe:!0})},7330:function(e,t,o){"use strict";var s=o(8052),a=o(1702),i=o(1340),r=o(8053),l=URLSearchParams,n=l.prototype,d=a(n.getAll),g=a(n.has),m=new l("a=1");m.has("a",2)&&s(n,"has",(function(e){var t=arguments.length,o=t<2?void 0:arguments[1];if(t&&void 0===o)return g(this,e);var s=d(this,e);r(t,1);var a=i(o),l=0;while(l<s.length)if(s[l++]===a)return!0;return!1}),{enumerable:!0,unsafe:!0})},2062:function(e,t,o){"use strict";var s=o(9781),a=o(1702),i=o(7045),r=URLSearchParams.prototype,l=a(r.forEach);s&&!("size"in r)&&i(r,"size",{get:function(){var e=0;return l(this,(function(){e++})),e},configurable:!0,enumerable:!0})},6854:function(e,t,o){"use strict";o.d(t,{Hv:function(){return r},K$:function(){return n},nq:function(){return d},uQ:function(){return l},up:function(){return i}});var s=o(4974);o(129);const a="/admin/admReport",i=({pageNum:e,pageSize:t})=>s.Z.get(a+"/getALLReport",{params:{pageNum:e,pageSize:t}}),r=({pageNum:e,pageSize:t,reportName:o})=>s.Z.get(a+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:o}}),l=({pageNum:e,pageSize:t,disposeName:o})=>s.Z.get(a+"/selectByDisposeName",{params:{pageNum:e,pageSize:t,disposeName:o}}),n=({items:e})=>s.Z.get(a+"/addReport",{params:{reportNameId:e.reportNameId,reportName:e.reportName,goodsId:e.goodsId,damageDescription:e.damageDescription}}),d=({sequenceId:e})=>s.Z.get(a+"/deleteReport",{params:{sequenceId:e}})},454:function(e,t,o){"use strict";o.d(t,{S_:function(){return g},aU:function(){return l},lt:function(){return n},qQ:function(){return p},xg:function(){return d},zw:function(){return m}});var s=o(4974),a=o(129),i=o.n(a);const r="/admin/admgoods",l=({pageNum:e,pageSize:t})=>s.Z.post(r+"/getAllGoods",i().stringify({pageNum:e,pageSize:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),n=({formData:e})=>s.Z.post(r+"/addGoods",{uploadImage:e.get("uploadImage"),goodsName:e.get("goodsName"),goodsQuantity:e.get("goodsQuantity"),goodsState:e.get("goodsState")},{headers:{"Content-type":"multipart/form-data"}}),d=({formData:e})=>s.Z.post(r+"/updateGoods",{uploadImage:e.get("uploadImage"),goodsId:e.get("goodsId"),goodsName:e.get("goodsName"),goodsState:e.get("goodsState")},{headers:{"Content-type":"multipart/form-data"}}),g=({pageNum:e,pageSize:t,goodsName:o})=>s.Z.post(r+"/selectGoodsByGoodsName",i().stringify({pageNum:e,pageSize:t,goodsName:o}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),m=({goodsId:e})=>s.Z.post(r+"/selectGoodsById",i().stringify({goodsId:e}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),p=({goodsId:e})=>s.Z.get(r+"/deleteGoods",{params:{goodsId:e}})}}]);
//# sourceMappingURL=323.80729918.js.map