"use strict";(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[607],{6607:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"checkItems"},[e._m(0),t("el-button",{staticClass:"itemsButton",attrs:{type:"text"},on:{click:e.itemsButton}},[e._v("添加新物品")]),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:e.dialogFormVisibleTitle,visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"物品名称",prop:"goodsName"}},[t("el-input",{model:{value:e.items.goodsName,callback:function(t){e.$set(e.items,"goodsName",t)},expression:"items.goodsName"}})],1),t("el-form-item",{attrs:{label:"物品状态",prop:"goodsState"}},[t("el-radio-group",{model:{value:e.items.goodsState,callback:function(t){e.$set(e.items,"goodsState",t)},expression:"items.goodsState"}},[t("el-radio",{attrs:{label:"已使用"}}),t("el-radio",{attrs:{label:"未使用"}})],1)],1),t("el-form-item",{attrs:{label:"上传图片",prop:"goodsImage"}},[t("el-upload",{staticClass:"itemsImg",attrs:{drag:"",action:"abcd","list-type":"picture","on-change":e.changeFile}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将物品照片拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitButton("rules")}}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1),t("el-table",{staticClass:"itemsTable",attrs:{data:e.tableData,border:"",align:"center","header-cell-style":{"text-align":"center"}}},[t("el-table-column",{attrs:{prop:"id",label:"物品id",align:"center"}}),t("el-table-column",{attrs:{prop:"image",label:"物品照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.row.image}})]}}])}),t("el-table-column",{attrs:{prop:"name",label:"物品名称",align:"center"}}),t("el-table-column",{attrs:{prop:"state",label:"物品状态",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.editClick(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.removeClick(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,pageSize:e.pageSize},on:{currentChange:e.currentChange}})],1)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品展示")])])}],o=function(){var e=this,t=e._self._c;return t("div",[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange}})],1)},l=[],r={name:"CheckItems-Pagination",props:{total:{type:Number,defalut:100},pageSize:{type:Number,defalut:10}},data(){return{currentPage:1}},methods:{currentChange(e){console.log(`当前页: ${e}`),this.$emit("currentChange",e)}}},n=r,m=a(1001),c=(0,m.Z)(n,o,l,!1,null,"dbe9c99a",null),g=c.exports,d=a(9060);const p="admgoods",u=({page:e})=>{d.Z.get(p+"/getAllGoods",{params:e})},b=(e,t,a)=>d.Z.post(p+`/addGoods${e}`,{uploadImage:t,goods:a},{headers:{"Content-type":"multipart/form-data"}}),h=({goodsId:e})=>{d.Z.get(p+"/deleteGoods",{params:e})};var f={name:"Content-CheckItems",components:{Pagination:g},data(){const e=(e,t,a)=>{this.items.goodsImage?a():a(new Error("请上传图片"))};return{formLabelWidth:"120px",tableData:[{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"},{id:"001",image:"https://pic3.zhimg.com/80/v2-cc3236b4e6b192e8a3f75a358b706582_720w.webp",state:"已使用",name:"王小虎"}],dialogFormVisible:!1,dialogFormVisibleTitle:"",items:{goodsId:"",goodsName:"",goodsState:"",goodsImage:""},fileList:[],rules:{goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],goodsState:[{required:!0,message:"请选择物品状态",trigger:"change"}],goodsImage:[{required:!0,validator:e,trigger:"change"}]},total:100,pageSize:10,currentPage:1}},methods:{async getItemsList(e){let t=await u({page:e});console.log("产品列表数据-----",t.data),this.tableData=t.data.data,this.total=t.data.total,this.pageSize=t.data.pageSize},async postItemsEdit(e,t,a){let s=await b({submitFormURL:e,img:t,goods:a});console.log("修改/增加产品列表-----",s.data),this.getItemsList(this.currentPage)},async getItemsRemove(e){let t=await h({id:e});console.log("产品列表数据-----",t.data),200===t.data.status&&(this.$message({type:"success",message:"删除成功!"}),this.getItemsList(this.currentPage))},currentChange(e){console.log("更新页码-----",e),this.currentPage=e,this.getItemsList(e)},editClick(e,t){console.log("修改操作-----",e,t),this.dialogFormVisible=!0,this.dialogFormVisibleTitle="修改物品数据",this.items.goodsName=t.name,this.items.goodsState=t.state,this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("validate-----",this.$refs.items),this.submitForm("deleteGoods")}))},removeClick(e,t){console.log("删除操作-----",e,t),this.$confirm("此操作将删除该物品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getItemsRemove(t.id)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},itemsButton(){this.dialogFormVisible=!0,this.dialogFormVisibleTitle="添加新物品",this.items.goodsName="",this.items.goodsState=""},submitButton(e){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("validate-----",this.$refs.items),this.submitForm("addGoods")}))},changeFile(e,t){console.log(t),this.fileList=t},submitForm(e){let t=new FormData;this.items.goodsImage=this.fileList[0].raw,console.log(this.fileList[0].raw);for(let a in this.items)console.log(this.items[a]),t.append(a,this.items[a]);delete t.goodsImage,this.postItemsEdit(e,this.items.goodsImage,t)}},created(){this.getItemsList(this.currentPage)}},v=f,w=(0,m.Z)(v,s,i,!1,null,"33bcb5fa",null),_=w.exports},9060:function(e,t,a){var s=a(6154);a(4720),a(2424);const i=s.Z.create({baseURL:"/admin",timeout:1e4});let o;i.interceptors.request.use((e=>e),(e=>Promise.reject(e))),i.interceptors.response.use((e=>(o.close(),e)),(e=>(setTimeout((()=>{o.close()}),1e3),Promise.reject(e)))),t.Z=i}}]);
//# sourceMappingURL=607.475626b2.js.map