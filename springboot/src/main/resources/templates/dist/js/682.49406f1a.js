(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[682],{2682:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ie}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"damageReported"},[e._m(0),t("div",{staticClass:"damageReportedInner"},[[t("div",{staticClass:"damageReportedInnerHeader"},[t("el-button",{on:{click:e.clearFilter}},[e._v("重置状态筛选")]),t("el-input",{attrs:{prop:"goodsId",size:"mini",placeholder:"id搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByIdFunc.apply(null,arguments)}},model:{value:e.searchById,callback:function(t){e.searchById=e._n(t)},expression:"searchById"}}),t("el-input",{attrs:{size:"mini",placeholder:"上报人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByReportNameFunc.apply(null,arguments)}},model:{value:e.searchByReportName,callback:function(t){e.searchByReportName="string"===typeof t?t.trim():t},expression:"searchByReportName"}}),t("el-input",{attrs:{size:"mini",placeholder:"处理人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByDisposeNameFunc.apply(null,arguments)}},model:{value:e.searchByDisposeName,callback:function(t){e.searchByDisposeName="string"===typeof t?t.trim():t},expression:"searchByDisposeName"}})],1),t("el-table",{ref:"filterTable",staticClass:"itemsTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"reportTime",label:"上报时间",sortable:"",width:"160","column-key":"reportTime"}}),t("el-table-column",{attrs:{prop:"reportName",label:"上报人"}}),t("el-table-column",{attrs:{prop:"goodsId",label:"物品id"}}),t("el-table-column",{attrs:{prop:"goodsName",label:"物品名称",formatter:e.formatter}}),t("el-table-column",{attrs:{prop:"goodsState",label:"状态",filters:[{text:"未处理",value:"未处理"},{text:"未同意",value:"未同意"},{text:"已同理未处理",value:"已同理未处理"},{text:"已处理",value:"已处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{type:e.tagColor(r),"disable-transitions":""}},[e._v(e._s(r.row.goodsState))])]}}])}),t("el-table-column",{attrs:{prop:"processTime",label:"处理时间",sortable:"",width:"160","column-key":"processTime"}}),t("el-table-column",{attrs:{prop:"disposeName",label:"处理人"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.$index,r.row)}}},[e._v("删除")])]}}])})],1)],t("div",{staticClass:"damageReportedButton",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"reportedListButton",attrs:{type:"success",round:""},on:{click:e.reportedListButton}},[e._v("上报损坏物品")])],1)],2),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules}},[t("el-form-item",{attrs:{label:"物品id(请输入数字)",prop:"goodsId"}},[t("el-input",{model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",e._n(t))},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.items.damageDescription,callback:function(t){e.$set(e.items,"damageDescription",t)},expression:"items.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品损坏上报")])])}],a=r(5743),o=r.n(a);function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var u=i,c="object"==typeof global&&global&&global.Object===Object&&global,l=c,d="object"==typeof self&&self&&self.Object===Object&&self,f=l||d||Function("return this")(),m=f,p=function(){return m.Date.now()},h=p,g=/\s/;function y(e){var t=e.length;while(t--&&g.test(e.charAt(t)));return t}var v=y,b=/^\s+/;function $(e){return e?e.slice(0,v(e)+1).replace(b,""):e}var D=$,S=m.Symbol,w=S,N=Object.prototype,k=N.hasOwnProperty,M=N.toString,T=w?w.toStringTag:void 0;function _(e){var t=k.call(e,T),r=e[T];try{e[T]=void 0;var n=!0}catch(a){}var s=M.call(e);return n&&(t?e[T]=r:delete e[T]),s}var O=_,B=Object.prototype,I=B.toString;function x(e){return I.call(e)}var F=x,C="[object Null]",R="[object Undefined]",j=w?w.toStringTag:void 0;function L(e){return null==e?void 0===e?R:C:j&&j in Object(e)?O(e):F(e)}var H=L;function Y(e){return null!=e&&"object"==typeof e}var Z=Y,W="[object Symbol]";function A(e){return"symbol"==typeof e||Z(e)&&H(e)==W}var V=A,z=NaN,U=/^[-+]0x[0-9a-f]+$/i,q=/^0b[01]+$/i,E=/^0o[0-7]+$/i,P=parseInt;function J(e){if("number"==typeof e)return e;if(V(e))return z;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=D(e);var r=q.test(e);return r||E.test(e)?P(e.slice(2),r?2:8):U.test(e)?z:+e}var G=J,Q="Expected a function",K=Math.max,X=Math.min;function ee(e,t,r){var n,s,a,o,i,c,l=0,d=!1,f=!1,m=!0;if("function"!=typeof e)throw new TypeError(Q);function p(t){var r=n,a=s;return n=s=void 0,l=t,o=e.apply(a,r),o}function g(e){return l=e,i=setTimeout(b,t),d?p(e):o}function y(e){var r=e-c,n=e-l,s=t-r;return f?X(s,a-n):s}function v(e){var r=e-c,n=e-l;return void 0===c||r>=t||r<0||f&&n>=a}function b(){var e=h();if(v(e))return $(e);i=setTimeout(b,y(e))}function $(e){return i=void 0,m&&n?p(e):(n=s=void 0,o)}function D(){void 0!==i&&clearTimeout(i),l=0,n=c=s=i=void 0}function S(){return void 0===i?o:$(h())}function w(){var e=h(),r=v(e);if(n=arguments,s=this,c=e,r){if(void 0===i)return g(c);if(f)return clearTimeout(i),i=setTimeout(b,t),p(c)}return void 0===i&&(i=setTimeout(b,t)),o}return t=G(t)||0,u(r)&&(d=!!r.leading,f="maxWait"in r,a=f?K(G(r.maxWait)||0,t):a,m="trailing"in r?!!r.trailing:m),w.cancel=D,w.flush=S,w}var te=ee,re=r(455),ne={name:"Content-DamageReported",data(){return{tableData:[{reportTime:"2023-07-02 03:29:33",reportName:"门酱",goodsId:1,goodsName:"物品名字",goodsState:"未处理",processTime:"2023-08-01 06:30:55",disposeName:"无"},{reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{reportTime:"2023-07-01 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已同理未处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{reportTime:"2023-07-03 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"}],items:{reportName:"",goodsId:"",damageDescription:"",reportTime:"",disposeName:"",goodsState:""},searchById:"",searchByReportName:"",searchByDisposeName:"",dialogFormVisible:!1,rules:{goodsId:[{required:!0,message:"请输入物品id",trigger:"blur"},{type:"number",message:"物品id必须为数值"}],damageDescription:[{required:!0,message:"请输入损坏描述",trigger:"blur"}]}}},methods:{async getReportList(){let e=await(0,re.up)();console.log("上报列表数据-----",e.data),this.tableData=[...e.data]},async postDamageReported(e){let t=await(0,re.K$)({items:e});console.log("上报提交-----",t.data)},async getSearchByIdFunc(e){let t=await(0,re.sX)(e);console.log("id搜索数据-----",t.data),this.tableData=[...t.data]},async getSearchByReportNameFunc(e){let t=await(0,re.Hv)(e);console.log("上报人搜索数据-----",t.data),this.tableData=[...t.data]},async getSearchByDisposeNameFunc(e){let t=await(0,re.uQ)(e);console.log("处理人搜索数据-----",t.data),this.tableData=[...t.data]},async getDeleteGoods(e){let t=await(0,re.nq)(e);console.log("删除数据-----",t.data),200===t.data.code&&(this.$message({type:"success",message:"删除成功!"}),this.getReportList())},searchByIdFunc:te((function(){this.getSearchByIdFunc(this.searchById)}),300),searchByReportNameFunc:te((function(){this.getSearchByReportNameFunc(this.searchById)}),300),searchByDisposeNameFunc:te((function(){this.getSearchByDisposeNameFunc(this.searchByDisposeName)}),300),submitForm(e){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.$refs.items),this.reportTime=o()(Date.now()).format("YYYY-MM-DD HH:mm:ss"),this.postDamageReported(this.items)}))},reportedListButton(){this.dialogFormVisible=!0},handleDelete(e,t){this.$confirm("此操作将删除该上报数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getDeleteGoods(t.goodsId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},formatter(e,t){return e.goodsName},filterTag(e,t){return t.goodsState===e},clearFilter(){this.$refs.filterTable.clearFilter()},tagColor(e){return"未处理"===e.row.goodsState?"info":"未同意"===e.row.goodsState?"danger":"已同理未处理"===e.row.goodsState?"warning":"已处理"===e.row.goodsState?"success":void 0}},created(){this.getReportList()}},se=ne,ae=r(1001),oe=(0,ae.Z)(se,n,s,!1,null,"dda6f55e",null),ie=oe.exports},5743:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",o="hour",i="day",u="week",c="month",l="quarter",d="year",f="date",m="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},v={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,c),a=r-s<0,o=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-s)/(a?s-o:o-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:i,D:f,h:o,m:a,s:s,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",$={};$[b]=g;var D=function(e){return e instanceof k},S=function e(t,r,n){var s;if(!t)return b;if("string"==typeof t){var a=t.toLowerCase();$[a]&&(s=a),r&&($[a]=r,s=a);var o=t.split("-");if(!s&&o.length>1)return e(o[0])}else{var i=t.name;$[i]=t,s=i}return!n&&s&&(b=s),s||!n&&b},w=function(e,t){if(D(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new k(r)},N=v;N.l=S,N.i=D,N.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e)}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(N.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return N},y.isValid=function(){return!(this.$d.toString()===m)},y.isSame=function(e,t){var r=w(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return w(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<w(e)},y.$g=function(e,t,r){return N.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!N.u(t)||t,l=N.p(e),m=function(e,t){var s=N.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(i)},p=function(e,t){return N.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(l){case d:return n?m(1,0):m(31,11);case c:return n?m(1,g):m(0,g+1);case u:var b=this.$locale().weekStart||0,$=(h<b?h+7:h)-b;return m(n?y-$:y+(6-$),g);case i:case f:return p(v+"Hours",0);case o:return p(v+"Minutes",1);case a:return p(v+"Seconds",2);case s:return p(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,u=N.p(e),l="set"+(this.$u?"UTC":""),m=(r={},r[i]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[o]=l+"Hours",r[a]=l+"Minutes",r[s]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],p=u===i?this.$D+(t-this.$W):t;if(u===c||u===d){var h=this.clone().set(f,1);h.$d[m](p),h.init(),this.$d=h.set(f,Math.min(this.$D,h.daysInMonth())).$d}else m&&this.$d[m](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[N.p(e)]()},y.add=function(n,l){var f,m=this;n=Number(n);var p=N.p(l),h=function(e){var t=w(m);return N.w(t.date(t.date()+Math.round(e*n)),m)};if(p===c)return this.set(c,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===i)return h(1);if(p===u)return h(7);var g=(f={},f[a]=t,f[o]=r,f[s]=e,f)[p]||1,y=this.$d.getTime()+n*g;return N.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||m;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=N.z(this),a=this.$H,o=this.$m,i=this.$M,u=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},f=function(e){return N.s(a%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(h,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return N.s(t.$y,4,"0");case"M":return i+1;case"MM":return N.s(i+1,2,"0");case"MMM":return d(r.monthsShort,i,c,3);case"MMMM":return d(c,i);case"D":return t.$D;case"DD":return N.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return N.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(a,o,!0);case"A":return p(a,o,!1);case"m":return String(o);case"mm":return N.s(o,2,"0");case"s":return String(t.$s);case"ss":return N.s(t.$s,2,"0");case"SSS":return N.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,f,m){var p,h=this,g=N.p(f),y=w(n),v=(y.utcOffset()-this.utcOffset())*t,b=this-y,$=function(){return N.m(h,y)};switch(g){case d:p=$()/12;break;case c:p=$();break;case l:p=$()/3;break;case u:p=(b-v)/6048e5;break;case i:p=(b-v)/864e5;break;case o:p=b/r;break;case a:p=b/t;break;case s:p=b/e;break;default:p=b}return m?p:N.a(p)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return $[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=S(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return N.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),M=k.prototype;return w.prototype=M,[["$ms",n],["$s",s],["$m",a],["$H",o],["$W",i],["$M",c],["$y",d],["$D",f]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,k,w),e.$i=!0),w},w.locale=S,w.isDayjs=D,w.unix=function(e){return w(1e3*e)},w.en=$[b],w.Ls=$,w.p={},w}))},455:function(e,t,r){"use strict";r.d(t,{Hv:function(){return i},K$:function(){return c},nq:function(){return l},sX:function(){return o},uQ:function(){return u},up:function(){return a}});var n=r(9060);const s="admReport",a=()=>{n.Z.get(s+"/getALLReport")},o=({id:e})=>{n.Z.get(s+"/selectById",{params:{goodId:e}})},i=({reportName:e})=>{n.Z.get(s+"/selectByReportName",{params:{reportName:e}})},u=({disposeName:e})=>{n.Z.get(s+"/selectByDisposeName",{params:{disposeName:e}})},c=e=>n.Z.post(s+"/admgoods/addGoods/",{report:e}),l=e=>n.Z.get(s+"/deleteReport",{params:{goodId:e}})},9060:function(e,t,r){"use strict";var n=r(4161);r(8499),r(7371);const s=n.Z.create({baseURL:"/admin",timeout:1e4});let a;s.interceptors.request.use((e=>e),(e=>Promise.reject(e))),s.interceptors.response.use((e=>(a.close(),e)),(e=>(setTimeout((()=>{a.close()}),1e3),Promise.reject(e)))),t.Z=s}}]);
//# sourceMappingURL=682.49406f1a.js.map