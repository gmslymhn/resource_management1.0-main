"use strict";(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[294],{6999:function(e,t,o){o.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange}})],1)},r=[],s={name:"CheckItems-Pagination",props:{total:{type:Number,defalut:100},pageSize:{type:Number,defalut:10}},data(){return{currentPage:1}},methods:{currentChange(e){console.log(`当前页: ${e}`),this.$emit("currentChange",e)}}},i=s,n=o(1001),l=(0,n.Z)(i,a,r,!1,null,"dbe9c99a",null),d=l.exports},7294:function(e,t,o){o.r(t),o.d(t,{default:function(){return b}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"damageReported"},[e._m(0),t("div",{staticClass:"damageReportedInner"},[[t("div",{staticClass:"damageReportedInnerHeader"},[t("el-button",{on:{click:e.clearFilter}},[e._v("重置状态筛选")]),t("el-input",{attrs:{size:"mini",placeholder:"上报人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByReportNameFunc.apply(null,arguments)}},model:{value:e.searchByReportName,callback:function(t){e.searchByReportName="string"===typeof t?t.trim():t},expression:"searchByReportName"}})],1),t("el-table",{ref:"filterTable",staticClass:"itemsTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{align:"center",prop:"sequenceId",label:"上报信息id"}}),t("el-table-column",{attrs:{align:"center",prop:"reportTime",label:"上报时间",sortable:"",width:"160","column-key":"reportTime"}}),t("el-table-column",{attrs:{align:"center",prop:"reportName",label:"上报人"}}),t("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"物品id"}}),t("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"物品名称",formatter:e.formatter}}),t("el-table-column",{attrs:{align:"center",prop:"goodsState",label:"状态",filters:[{text:"未处理",value:"未处理"},{text:"未同意",value:"未同意"},{text:"已同理未处理",value:"已同理未处理"},{text:"已处理",value:"已处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tag",{attrs:{type:e.tagColor(o),"disable-transitions":""}},[e._v(e._s(o.row.goodsState))])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"processTime",label:"处理时间",sortable:"",width:"160","column-key":"processTime"}}),t("el-table-column",{attrs:{align:"center",prop:"disposeName",label:"处理人"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(o.$index,o.row)}}},[e._v("删除")])]}}])})],1)],t("div",{staticClass:"damageReportedButton",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"reportedListButton",attrs:{type:"success",round:""},on:{click:e.reportedListButton}},[e._v("上报损坏物品")])],1)],2),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules}},[t("el-form-item",{attrs:{label:"物品id(请输入数字)",prop:"goodsId"}},[t("el-input",{model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",e._n(t))},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.items.damageDescription,callback:function(t){e.$set(e.items,"damageDescription",t)},expression:"items.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品损坏上报")])])}],s=o(881),i=o(6999),n=o(9060);const l="/user/useReport",d=({pageNum:e,pageSize:t})=>n.Z.get(l+"/getALLReport",{params:{pageNum:e,pageSize:t}}),c=({pageNum:e,pageSize:t,reportName:o})=>n.Z.get(l+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:o}}),p=({items:e})=>n.Z.post(l+"/addReport",{report:e},{headers:{"Content-Type":"application/json"}}),m=({sequenceId:e})=>n.Z.get(l+"/deleteReport",{params:{sequenceId:e}});var u={name:"Content-DamageReported",components:{Pagination:i.Z},data(){return{tableData:[{sequenceId:1,reportTime:"2023-07-02 03:29:33",reportName:"门酱",goodsId:1,goodsName:"物品名字",goodsState:"未处理",processTime:"2023-08-01 06:30:55",disposeName:"无"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-01 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已同理未处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-03 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"}],items:{reportName:"",goodsId:"",damageDescription:"",reportTime:"",disposeName:"",goodsState:""},searchByReportName:"",total:100,totalPages:10,pageSize:10,pageNum:1,dialogFormVisible:!1,rules:{goodsId:[{required:!0,message:"请输入物品id",trigger:"blur"},{type:"number",message:"物品id必须为数值"}],damageDescription:[{required:!0,message:"请输入损坏描述",trigger:"blur"}]}}},methods:{async getReportList(e,t){let o=await d({pageNum:e,pageSize:t});console.log("上报列表数据-----",o.data),this.tableData=[...o.data],this.total=o.data.total,this.totalPages=o.data.totalPages},async postDamageReported(e){let t=await p({items:e});console.log("上报提交-----",t.data)},async getSearchByReportNameFunc(e,t,o){let a=await c({pageNum:e,pageSize:t,reportName:o});console.log("上报人搜索数据-----",a.data),this.tableData=[...a.data]},async getDeleteGoods(e){let t=await m({sequenceId:e});console.log("删除数据-----",t.data),200===t.data.code&&(this.$message({type:"success",message:"删除成功!"}),this.getReportList(this.pageNum,this.pageSize))},searchByReportNameFunc:(0,s.Z)((function(){this.getSearchByReportNameFunc(this.pageNum,this.pageSize,this.reportName)}),300),submitForm(e){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.items),this.postDamageReported(this.items)}))},reportedListButton(){this.dialogFormVisible=!0},handleDelete(e,t){this.$confirm("此操作将删除该上报数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getDeleteGoods(t.sequenceId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getReportList(e,this.pageSize)},formatter(e,t){return e.goodsName},filterTag(e,t){return t.goodsState===e},clearFilter(){this.$refs.filterTable.clearFilter()},tagColor(e){return"未处理"===e.row.goodsState?"info":"未同意"===e.row.goodsState?"danger":"已同理未处理"===e.row.goodsState?"warning":"已处理"===e.row.goodsState?"success":void 0}},created(){this.getReportList(this.pageNum,this.pageSize)}},g=u,f=o(1001),N=(0,f.Z)(g,a,r,!1,null,"160de252",null),b=N.exports},881:function(e,t,o){function a(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}o.d(t,{Z:function(){return Q}});var r=a,s="object"==typeof global&&global&&global.Object===Object&&global,i=s,n="object"==typeof self&&self&&self.Object===Object&&self,l=i||n||Function("return this")(),d=l,c=function(){return d.Date.now()},p=c,m=/\s/;function u(e){var t=e.length;while(t--&&m.test(e.charAt(t)));return t}var g=u,f=/^\s+/;function N(e){return e?e.slice(0,g(e)+1).replace(f,""):e}var b=N,h=d.Symbol,v=h,y=Object.prototype,T=y.hasOwnProperty,I=y.toString,S=v?v.toStringTag:void 0;function C(e){var t=T.call(e,S),o=e[S];try{e[S]=void 0;var a=!0}catch(s){}var r=I.call(e);return a&&(t?e[S]=o:delete e[S]),r}var R=C,q=Object.prototype,k=q.toString;function w(e){return k.call(e)}var x=w,D="[object Null]",_="[object Undefined]",j=v?v.toStringTag:void 0;function z(e){return null==e?void 0===e?_:D:j&&j in Object(e)?R(e):x(e)}var F=z;function B(e){return null!=e&&"object"==typeof e}var $=B,O="[object Symbol]";function P(e){return"symbol"==typeof e||$(e)&&F(e)==O}var Z=P,L=NaN,V=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,A=/^0o[0-7]+$/i,G=parseInt;function M(e){if("number"==typeof e)return e;if(Z(e))return L;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=b(e);var o=E.test(e);return o||A.test(e)?G(e.slice(2),o?2:8):V.test(e)?L:+e}var W=M,H="Expected a function",U=Math.max,J=Math.min;function K(e,t,o){var a,s,i,n,l,d,c=0,m=!1,u=!1,g=!0;if("function"!=typeof e)throw new TypeError(H);function f(t){var o=a,r=s;return a=s=void 0,c=t,n=e.apply(r,o),n}function N(e){return c=e,l=setTimeout(v,t),m?f(e):n}function b(e){var o=e-d,a=e-c,r=t-o;return u?J(r,i-a):r}function h(e){var o=e-d,a=e-c;return void 0===d||o>=t||o<0||u&&a>=i}function v(){var e=p();if(h(e))return y(e);l=setTimeout(v,b(e))}function y(e){return l=void 0,g&&a?f(e):(a=s=void 0,n)}function T(){void 0!==l&&clearTimeout(l),c=0,a=d=s=l=void 0}function I(){return void 0===l?n:y(p())}function S(){var e=p(),o=h(e);if(a=arguments,s=this,d=e,o){if(void 0===l)return N(d);if(u)return clearTimeout(l),l=setTimeout(v,t),f(d)}return void 0===l&&(l=setTimeout(v,t)),n}return t=W(t)||0,r(o)&&(m=!!o.leading,u="maxWait"in o,i=u?U(W(o.maxWait)||0,t):i,g="trailing"in o?!!o.trailing:g),S.cancel=T,S.flush=I,S}var Q=K}}]);
//# sourceMappingURL=294.f0db0348.js.map