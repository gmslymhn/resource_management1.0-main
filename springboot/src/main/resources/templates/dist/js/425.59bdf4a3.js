"use strict";(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[425],{6999:function(e,t,o){o.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange}})],1)},r=[],s={name:"CheckItems-Pagination",props:{total:{type:Number,defalut:100},pageSize:{type:Number,defalut:10}},data(){return{currentPage:1}},methods:{currentChange(e){console.log(`当前页: ${e}`),this.$emit("currentChange",e)}}},i=s,n=o(1001),l=(0,n.Z)(i,a,r,!1,null,"dbe9c99a",null),c=l.exports},7425:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"damageReported"},[e._m(0),t("div",{staticClass:"damageReportedInner"},[[t("div",{staticClass:"damageReportedInnerHeader"},[t("el-button",{on:{click:e.clearFilter}},[e._v("重置状态筛选")]),t("el-input",{attrs:{size:"mini",placeholder:"上报人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByReportNameFunc.apply(null,arguments)}},model:{value:e.searchByReportName,callback:function(t){e.searchByReportName="string"===typeof t?t.trim():t},expression:"searchByReportName"}}),t("el-input",{attrs:{size:"mini",placeholder:"处理人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByDisposeNameFunc.apply(null,arguments)}},model:{value:e.searchByDisposeName,callback:function(t){e.searchByDisposeName="string"===typeof t?t.trim():t},expression:"searchByDisposeName"}})],1),t("el-table",{ref:"filterTable",staticClass:"itemsTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{align:"center",prop:"sequenceId",label:"上报信息id"}}),t("el-table-column",{attrs:{align:"center",prop:"reportTime",label:"上报时间",sortable:"",width:"160","column-key":"reportTime"}}),t("el-table-column",{attrs:{align:"center",prop:"reportName",label:"上报人"}}),t("el-table-column",{attrs:{align:"center",prop:"goodsId",label:"物品id"}}),t("el-table-column",{attrs:{align:"center",prop:"goodsName",label:"物品名称",formatter:e.formatter}}),t("el-table-column",{attrs:{align:"center",prop:"goodsState",label:"状态",filters:[{text:"未处理",value:"未处理"},{text:"未同意",value:"未同意"},{text:"已同理未处理",value:"已同理未处理"},{text:"已处理",value:"已处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tag",{attrs:{type:e.tagColor(o),"disable-transitions":""}},[e._v(e._s(o.row.goodsState))])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"processTime",label:"处理时间",sortable:"",width:"160","column-key":"processTime"}}),t("el-table-column",{attrs:{align:"center",prop:"disposeName",label:"处理人"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(o.$index,o.row)}}},[e._v("删除")])]}}])})],1)],t("div",{staticClass:"damageReportedButton",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"reportedListButton",attrs:{type:"success",round:""},on:{click:e.reportedListButton}},[e._v("上报损坏物品")])],1)],2),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules}},[t("el-form-item",{attrs:{label:"物品id(请输入数字)",prop:"goodsId"}},[t("el-input",{model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",e._n(t))},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.items.damageDescription,callback:function(t){e.$set(e.items,"damageDescription",t)},expression:"items.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品损坏上报")])])}],s=o(881),i=o(6999),n=o(6854),l={name:"Content-DamageReported",components:{Pagination:i.Z},data(){return{tableData:[{sequenceId:1,reportTime:"2023-07-02 03:29:33",reportName:"门酱",goodsId:1,goodsName:"物品名字",goodsState:"未处理",processTime:"2023-08-01 06:30:55",disposeName:"无"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-01 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已同理未处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-03 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"已处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"}],items:{reportName:"",goodsId:"",damageDescription:"",reportTime:"",disposeName:"",goodsState:""},searchByReportName:"",searchByDisposeName:"",total:100,totalPages:10,pageSize:10,pageNum:1,dialogFormVisible:!1,rules:{goodsId:[{required:!0,message:"请输入物品id",trigger:"blur"},{type:"number",message:"物品id必须为数值"}],damageDescription:[{required:!0,message:"请输入损坏描述",trigger:"blur"}]}}},methods:{async getReportList(e,t){let o=await(0,n.up)({pageNum:e,pageSize:t});console.log("上报列表数据-----",o.data),this.tableData=[...o.data],this.total=o.data.total,this.totalPages=o.data.totalPages},async postDamageReported(e){let t=await(0,n.K$)({items:e});console.log("上报提交-----",t.data)},async getSearchByReportNameFunc(e,t,o){let a=await(0,n.Hv)({pageNum:e,pageSize:t,reportName:o});console.log("上报人搜索数据-----",a.data),this.tableData=[...a.data]},async getSearchByDisposeNameFunc(e,t,o){let a=await(0,n.uQ)({pageNum:e,pageSize:t,disposeName:o});console.log("处理人搜索数据-----",a.data),this.tableData=[...a.data]},async getDeleteGoods(e){let t=await(0,n.nq)({sequenceId:e});console.log("删除数据-----",t.data),200===t.data.code&&(this.$message({type:"success",message:"删除成功!"}),this.getReportList(1,this.pageSize))},searchByReportNameFunc:(0,s.Z)((function(){this.getSearchByReportNameFunc(this.pageNum,this.pageSize,this.reportName)}),300),searchByDisposeNameFunc:(0,s.Z)((function(){this.getSearchByDisposeNameFunc(this.pageNum,this.pageSize,this.searchByDisposeName)}),300),submitForm(e){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.items),this.postDamageReported(this.items)}))},reportedListButton(){this.dialogFormVisible=!0},handleDelete(e,t){this.$confirm("此操作将删除该上报数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getDeleteGoods(t.sequenceId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getReportList(e,this.pageSize)},formatter(e,t){return e.goodsName},filterTag(e,t){return t.goodsState===e},clearFilter(){this.$refs.filterTable.clearFilter()},tagColor(e){return"未处理"===e.row.goodsState?"info":"未同意"===e.row.goodsState?"danger":"已同理未处理"===e.row.goodsState?"warning":"已处理"===e.row.goodsState?"success":void 0}},created(){this.getReportList(this.pageNum,this.pageSize)}},c=l,p=o(1001),d=(0,p.Z)(c,a,r,!1,null,"fa4c3a36",null),u=d.exports},6854:function(e,t,o){o.d(t,{Hv:function(){return i},K$:function(){return l},nq:function(){return c},uQ:function(){return n},up:function(){return s}});var a=o(9060);const r="/admin/admReport",s=({pageNum:e,pageSize:t})=>a.Z.get(r+"/getALLReport",{params:{pageNum:e,pageSize:t}}),i=({pageNum:e,pageSize:t,reportName:o})=>a.Z.get(r+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:o}}),n=({pageNum:e,pageSize:t,disposeName:o})=>a.Z.get(r+"/selectByDisposeName",{params:{pageNum:e,pageSize:t,disposeName:o}}),l=({items:e})=>a.Z.post(r+"/addReport",{report:e},{headers:{"Content-Type":"application/json"}}),c=({sequenceId:e})=>a.Z.get(r+"/deleteReport",{params:{sequenceId:e}})},881:function(e,t,o){function a(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}o.d(t,{Z:function(){return J}});var r=a,s="object"==typeof global&&global&&global.Object===Object&&global,i=s,n="object"==typeof self&&self&&self.Object===Object&&self,l=i||n||Function("return this")(),c=l,p=function(){return c.Date.now()},d=p,u=/\s/;function m(e){var t=e.length;while(t--&&u.test(e.charAt(t)));return t}var g=m,f=/^\s+/;function N(e){return e?e.slice(0,g(e)+1).replace(f,""):e}var h=N,b=c.Symbol,v=b,y=Object.prototype,T=y.hasOwnProperty,S=y.toString,I=v?v.toStringTag:void 0;function D(e){var t=T.call(e,I),o=e[I];try{e[I]=void 0;var a=!0}catch(s){}var r=S.call(e);return a&&(t?e[I]=o:delete e[I]),r}var k=D,C=Object.prototype,q=C.toString;function B(e){return q.call(e)}var x=B,R="[object Null]",w="[object Undefined]",z=v?v.toStringTag:void 0;function F(e){return null==e?void 0===e?w:R:z&&z in Object(e)?k(e):x(e)}var _=F;function j(e){return null!=e&&"object"==typeof e}var $=j,O="[object Symbol]";function P(e){return"symbol"==typeof e||$(e)&&_(e)==O}var Z=P,L=NaN,V=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,H=/^0o[0-7]+$/i,A=parseInt;function G(e){if("number"==typeof e)return e;if(Z(e))return L;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=h(e);var o=E.test(e);return o||H.test(e)?A(e.slice(2),o?2:8):V.test(e)?L:+e}var K=G,M="Expected a function",Q=Math.max,W=Math.min;function U(e,t,o){var a,s,i,n,l,c,p=0,u=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError(M);function f(t){var o=a,r=s;return a=s=void 0,p=t,n=e.apply(r,o),n}function N(e){return p=e,l=setTimeout(v,t),u?f(e):n}function h(e){var o=e-c,a=e-p,r=t-o;return m?W(r,i-a):r}function b(e){var o=e-c,a=e-p;return void 0===c||o>=t||o<0||m&&a>=i}function v(){var e=d();if(b(e))return y(e);l=setTimeout(v,h(e))}function y(e){return l=void 0,g&&a?f(e):(a=s=void 0,n)}function T(){void 0!==l&&clearTimeout(l),p=0,a=c=s=l=void 0}function S(){return void 0===l?n:y(d())}function I(){var e=d(),o=b(e);if(a=arguments,s=this,c=e,o){if(void 0===l)return N(c);if(m)return clearTimeout(l),l=setTimeout(v,t),f(c)}return void 0===l&&(l=setTimeout(v,t)),n}return t=K(t)||0,r(o)&&(u=!!o.leading,m="maxWait"in o,i=m?Q(K(o.maxWait)||0,t):i,g="trailing"in o?!!o.trailing:g),I.cancel=T,I.flush=S,I}var J=U}}]);
//# sourceMappingURL=425.59bdf4a3.js.map