(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[765],{2114:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"damageReported"},[e._m(0),t("div",{staticClass:"damageReportedInner"},[[t("div",{staticClass:"damageReportedInnerHeader"},[t("el-button",{on:{click:e.clearFilter}},[e._v("重置状态筛选")]),t("el-input",{attrs:{size:"mini",placeholder:"上报人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByReportNameFuncButton.apply(null,arguments)}},model:{value:e.searchByReportName,callback:function(t){e.searchByReportName="string"===typeof t?t.trim():t},expression:"searchByReportName"}}),t("el-input",{attrs:{size:"mini",placeholder:"处理人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByDisposeNameFuncButton.apply(null,arguments)}},model:{value:e.searchByDisposeName,callback:function(t){e.searchByDisposeName="string"===typeof t?t.trim():t},expression:"searchByDisposeName"}}),t("el-button",{staticClass:"seeAll",attrs:{type:"primary",round:""},on:{click:e.seeAll}},[e._v("查看全部")])],1),t("el-table",{ref:"filterTable",staticClass:"itemsTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{width:"100px",align:"center",prop:"sequenceId",label:"上报信息id"}}),t("el-table-column",{attrs:{width:"160px",align:"center",prop:"reportTime",label:"上报时间",sortable:"","column-key":"reportTime"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"reportName",label:"上报人"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsId",label:"物品id"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsName",label:"物品名称",formatter:e.formatter}}),t("el-table-column",{attrs:{align:"center",prop:"damageDescription",label:"损坏描述"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsState",label:"状态",filters:[{text:"未处理",value:"未处理"},{text:"已处理",value:"已处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"未处理"===a.row.goodsState?"info":"success","disable-transitions":""}},[e._v(e._s(a.row.goodsState))])]}}])}),t("el-table-column",{attrs:{width:"160px",align:"center",prop:"processTime",label:"处理时间",sortable:"","column-key":"processTime"}}),t("el-table-column",{attrs:{align:"center",prop:"disposeName",label:"处理人"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1)]],2),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules}},[t("el-form-item",{attrs:{label:"上报人id",prop:"reportNameId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.items.reportNameId,callback:function(t){e.$set(e.items,"reportNameId",t)},expression:"items.reportNameId"}})],1),t("el-form-item",{attrs:{label:"上报人姓名",prop:"reportName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.items.reportName,callback:function(t){e.$set(e.items,"reportName",e._n(t))},expression:"items.reportName"}})],1),t("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[t("el-input",{model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",e._n(t))},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.items.damageDescription,callback:function(t){e.$set(e.items,"damageDescription",t)},expression:"items.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("rules")}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品损坏上报")])])}],i=a(4615),n=a(4458),o=a(6854),u=a(7484),l=a.n(u),c={name:"Content-DamageReported",components:{Pagination:n.Z},data(){return{tableData:[],items:{reportNameId:"",reportName:"",goodsId:"",damageDescription:""},ok:{reportNameId:120,reportName:"李浩坤",goodsId:35447,damageDescription:"描述"},searchByReportName:"",searchByDisposeName:"",total:0,totalPages:10,pageSize:10,pageNum:1,dialogFormVisible:!1,rules:{goodsId:[{required:!0,message:"请输入物品id",trigger:"blur"}],goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],damageDescription:[{required:!0,message:"请输入损坏描述",trigger:"blur"}]}}},methods:{async getReportList(e,t){let a=await(0,o.up)({pageNum:e,pageSize:t});console.log("上报列表数据-----",a),a.data?(this.tableData=[...a.data.data.list],this.total=a.data.data.total,this.totalPages=a.data.data.pages,this.tableData.forEach((e=>{e.reportTime=l()(e.reportTime).format("YYYY-MM-DD HH:mm:ss")})),this.tableData.forEach((e=>{e.processTime=l()(e.processTime).format("YYYY-MM-DD HH:mm:ss")}))):(this.tableData=[],this.total=0,this.totalPages=0)},async getSearchByReportNameFunc(e,t,a){let r=await(0,o.Hv)({pageNum:e,pageSize:t,reportName:a});console.log("上报人搜索数据-----",r),r.data?(this.tableData=[...r.data.data.list],this.total=r.data.data.total,this.totalPages=r.data.data.pages,this.tableData.forEach((e=>{e.reportTime=l()(e.reportTime).format("YYYY-MM-DD HH:mm:ss")})),this.tableData.forEach((e=>{e.processTime=l()(e.processTime).format("YYYY-MM-DD HH:mm:ss")}))):(this.tableData=[],this.total=0,this.totalPages=0)},async getSearchByDisposeNameFunc(e,t,a){let r=await(0,o.uQ)({pageNum:e,pageSize:t,disposeName:a});console.log("处理人搜索数据-----",r),r.data?(this.tableData=[...r.data.data.list],this.total=r.data.data.total,this.totalPages=r.data.data.pages,this.tableData.forEach((e=>{e.reportTime=l()(e.reportTime).format("YYYY-MM-DD HH:mm:ss")})),this.tableData.forEach((e=>{e.processTime=l()(e.processTime).format("YYYY-MM-DD HH:mm:ss")}))):(this.tableData=[],this.total=0,this.totalPages=0)},async getDeleteGoods(e){let t=await(0,o.nq)({sequenceId:e});console.log("删除数据-----",t),200===t.status&&(this.$message({type:"success",message:"删除成功咯!"}),this.getReportList(1,this.pageSize))},searchByReportNameFuncButton:(0,i.Z)((function(){this.searchByReportName&&this.getSearchByReportNameFunc(this.pageNum,this.pageSize,this.searchByReportName)}),300),searchByDisposeNameFuncButton:(0,i.Z)((function(){this.searchByDisposeName&&this.getSearchByDisposeNameFunc(this.pageNum,this.pageSize,this.searchByDisposeName)}),300),seeAll(){this.getReportList(1,this.pageSize),this.searchByReportName="",this.searchByDisposeName=""},handleDelete(e,t){this.$confirm("此操作将删除该上报数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getDeleteGoods(t.sequenceId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getReportList(e,this.pageSize)},formatter(e,t){return e.goodsName},filterTag(e,t){return t.goodsState===e},clearFilter(){this.$refs.filterTable.clearFilter(),this.getReportList(1,this.pageSize)}},created(){this.getReportList(this.pageNum,this.pageSize)},mounted(){this.items.reportName=this.$store.state.login.name,this.items.reportNameId=Number(this.$store.state.login.id)}},d=c,m=a(1001),p=(0,m.Z)(d,r,s,!1,null,"e6b69910",null),h=p.exports},7484:function(e){!function(t,a){e.exports=a()}(0,(function(){"use strict";var e=1e3,t=6e4,a=36e5,r="millisecond",s="second",i="minute",n="hour",o="day",u="week",l="month",c="quarter",d="year",m="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},y=function(e,t,a){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(a)+e},b={s:y,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),r=Math.floor(a/60),s=a%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(s,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var r=12*(a.year()-t.year())+(a.month()-t.month()),s=t.clone().add(r,l),i=a-s<0,n=t.clone().add(r+(i?-1:1),l);return+(-(r+(a-s)/(i?s-n:n-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:u,d:o,D:m,h:n,m:i,s:s,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},$="en",D={};D[$]=g;var N=function(e){return e instanceof w},v=function e(t,a,r){var s;if(!t)return $;if("string"==typeof t){var i=t.toLowerCase();D[i]&&(s=i),a&&(D[i]=a,s=i);var n=t.split("-");if(!s&&n.length>1)return e(n[0])}else{var o=t.name;D[o]=t,s=o}return!r&&s&&($=s),s||!r&&$},S=function(e,t){if(N(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new w(a)},M=b;M.l=v,M.i=N,M.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var w=function(){function g(e){this.$L=v(e.locale,null,!0),this.parse(e)}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(M.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return M},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var a=S(e);return this.startOf(t)<=a&&a<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,a){return M.u(e)?this[t]:this.set(a,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var a=this,r=!!M.u(t)||t,c=M.p(e),p=function(e,t){var s=M.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return r?s:s.endOf(o)},h=function(e,t){return M.w(a.toDate()[e].apply(a.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},f=this.$W,g=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(c){case d:return r?p(1,0):p(31,11);case l:return r?p(1,g):p(0,g+1);case u:var $=this.$locale().weekStart||0,D=(f<$?f+7:f)-$;return p(r?y-D:y+(6-D),g);case o:case m:return h(b+"Hours",0);case n:return h(b+"Minutes",1);case i:return h(b+"Seconds",2);case s:return h(b+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var a,u=M.p(e),c="set"+(this.$u?"UTC":""),p=(a={},a[o]=c+"Date",a[m]=c+"Date",a[l]=c+"Month",a[d]=c+"FullYear",a[n]=c+"Hours",a[i]=c+"Minutes",a[s]=c+"Seconds",a[r]=c+"Milliseconds",a)[u],h=u===o?this.$D+(t-this.$W):t;if(u===l||u===d){var f=this.clone().set(m,1);f.$d[p](h),f.init(),this.$d=f.set(m,Math.min(this.$D,f.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[M.p(e)]()},y.add=function(r,c){var m,p=this;r=Number(r);var h=M.p(c),f=function(e){var t=S(p);return M.w(t.date(t.date()+Math.round(e*r)),p)};if(h===l)return this.set(l,this.$M+r);if(h===d)return this.set(d,this.$y+r);if(h===o)return f(1);if(h===u)return f(7);var g=(m={},m[i]=t,m[n]=a,m[s]=e,m)[h]||1,y=this.$d.getTime()+r*g;return M.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=M.z(this),i=this.$H,n=this.$m,o=this.$M,u=a.weekdays,l=a.months,c=a.meridiem,d=function(e,a,s,i){return e&&(e[a]||e(t,r))||s[a].slice(0,i)},m=function(e){return M.s(i%12||12,e,"0")},h=c||function(e,t,a){var r=e<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(f,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return M.s(t.$y,4,"0");case"M":return o+1;case"MM":return M.s(o+1,2,"0");case"MMM":return d(a.monthsShort,o,l,3);case"MMMM":return d(l,o);case"D":return t.$D;case"DD":return M.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(a.weekdaysMin,t.$W,u,2);case"ddd":return d(a.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(i);case"HH":return M.s(i,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return h(i,n,!0);case"A":return h(i,n,!1);case"m":return String(n);case"mm":return M.s(n,2,"0");case"s":return String(t.$s);case"ss":return M.s(t.$s,2,"0");case"SSS":return M.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,m,p){var h,f=this,g=M.p(m),y=S(r),b=(y.utcOffset()-this.utcOffset())*t,$=this-y,D=function(){return M.m(f,y)};switch(g){case d:h=D()/12;break;case l:h=D();break;case c:h=D()/3;break;case u:h=($-b)/6048e5;break;case o:h=($-b)/864e5;break;case n:h=$/a;break;case i:h=$/t;break;case s:h=$/e;break;default:h=$}return p?h:M.a(h)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return D[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),r=v(e,t,!0);return r&&(a.$L=r),a},y.clone=function(){return M.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),k=w.prototype;return S.prototype=k,[["$ms",r],["$s",s],["$m",i],["$H",n],["$W",o],["$M",l],["$y",d],["$D",m]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,w,S),e.$i=!0),S},S.locale=v,S.isDayjs=N,S.unix=function(e){return S(1e3*e)},S.en=D[$],S.Ls=D,S.p={},S}))},6854:function(e,t,a){"use strict";a.d(t,{Hv:function(){return n},K$:function(){return u},nq:function(){return l},uQ:function(){return o},up:function(){return i}});var r=a(4974);a(129);const s="/admin/admReport",i=({pageNum:e,pageSize:t})=>r.Z.get(s+"/getALLReport",{params:{pageNum:e,pageSize:t}}),n=({pageNum:e,pageSize:t,reportName:a})=>r.Z.get(s+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:a}}),o=({pageNum:e,pageSize:t,disposeName:a})=>r.Z.get(s+"/selectByDisposeName",{params:{pageNum:e,pageSize:t,disposeName:a}}),u=({items:e})=>r.Z.get(s+"/addReport",{params:{reportNameId:e.reportNameId,reportName:e.reportName,goodsId:e.goodsId,damageDescription:e.damageDescription}}),l=({sequenceId:e})=>r.Z.get(s+"/deleteReport",{params:{sequenceId:e}})}}]);
//# sourceMappingURL=765.acad4ca8.js.map