{"version":3,"file":"js/221.f3b5c198.js","mappings":"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","sources":["webpack://resource/./src/views/product/message/MessageReported.vue","webpack://resource/src/views/product/message/MessageReported.vue","webpack://resource/./src/views/product/message/MessageReported.vue?235d","webpack://resource/./src/views/product/message/MessageReported.vue?bdb3","webpack://resource/./src/api/goods/goodsAdmin.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"messageReported\"},[_vm._m(0),_c('div',{staticClass:\"messageHeader\"},[_c('el-badge',{staticClass:\"messageHeaderReported\",attrs:{\"value\":_vm.reportedMessage,\"max\":99}},[_c('el-button',{attrs:{\"type\":\"success\"}},[_vm._v(\"损坏上报\")])],1),_c('el-badge',{staticClass:\"messageHeaderAssets\",attrs:{\"value\":_vm.assetsMessage,\"max\":99}},[_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.gotoMessageAssets}},[_vm._v(\"资金审批\")])],1)],1),_c('div',{staticClass:\"messageReportedInner\"},[_c('el-table',{ref:\"filterTable\",staticClass:\"reportedTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"sequenceId\",\"label\":\"上报信息id\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"reportNameId\",\"label\":\"上报人id\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"reportName\",\"label\":\"上报人\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"goodsId\",\"label\":\"物品id\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"goodsName\",\"label\":\"物品名称\",\"formatter\":_vm.formatter}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"goodsState\",\"label\":\"状态\",\"filters\":[{ text: '未处理', value: '未处理' }],\"filter-placement\":\"bottom-end\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":\"info\",\"disable-transitions\":\"\"}},[_vm._v(_vm._s(scope.row.goodsState))])]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"damageDescription\",\"label\":\"损坏描述\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"reportTime\",\"label\":\"上报时间\",\"sortable\":\"\",\"width\":\"160\",\"column-key\":\"reportTime\"}}),_c('el-table-column',{attrs:{\"label\":\"处理\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.disposeButton(scope.$index, scope.row)}}},[_vm._v(\"处理\")])]}}])})],1),_c('el-dialog',{staticClass:\"itemsDialog\",attrs:{\"title\":\"损坏物品处理\",\"visible\":_vm.dialogFormVisibleEdit,\"append-to-body\":true},on:{\"update:visible\":function($event){_vm.dialogFormVisibleEdit=$event}}},[_c('el-form',{ref:\"dispose\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.dispose,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"上报人\",\"prop\":\"reportName\"}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(_vm.dispose.reportName),callback:function ($$v) {_vm.$set(_vm.dispose, \"reportName\", $$v)},expression:\"dispose.reportName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品id\",\"prop\":\"goodsId\"}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(_vm.dispose.goodsId),callback:function ($$v) {_vm.$set(_vm.dispose, \"goodsId\", $$v)},expression:\"dispose.goodsId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"物品名字\",\"prop\":\"goodsName\"}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(_vm.dispose.goodsName),callback:function ($$v) {_vm.$set(_vm.dispose, \"goodsName\", $$v)},expression:\"dispose.goodsName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"上报人描述\",\"prop\":\"damageDescription\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"disabled\":true},model:{value:(_vm.dispose.damageDescription),callback:function ($$v) {_vm.$set(_vm.dispose, \"damageDescription\", $$v)},expression:\"dispose.damageDescription\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否删除已损坏物品\",\"prop\":\"goodsState\"}},[_c('el-radio-group',{model:{value:(_vm.dispose.goodsState),callback:function ($$v) {_vm.$set(_vm.dispose, \"goodsState\", $$v)},expression:\"dispose.goodsState\"}},[_c('el-radio',{attrs:{\"label\":\"是\"}}),_c('el-radio',{attrs:{\"label\":\"否\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"是否申请资金购买新物品\",\"prop\":\"gotoApply\"}},[_c('el-radio-group',{model:{value:(_vm.dispose.gotoApply),callback:function ($$v) {_vm.$set(_vm.dispose, \"gotoApply\", $$v)},expression:\"dispose.gotoApply\"}},[_c('el-radio',{attrs:{\"label\":\"是\"}}),_c('el-radio',{attrs:{\"label\":\"否\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"处理人描述\",\"prop\":\"disposeDescription\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.dispose.disposeDescription),callback:function ($$v) {_vm.$set(_vm.dispose, \"disposeDescription\", $$v)},expression:\"dispose.disposeDescription\"}})],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm()}}},[_vm._v(\"提 交\")])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisibleEdit = false}}},[_vm._v(\"关 闭\")])],1)],1)],1),_c('div',{staticClass:\"pagination\"},[_c('Pagination',{attrs:{\"total\":_vm.total,\"totalPages\":_vm.totalPages},on:{\"currentChange\":_vm.currentChange}})],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"itemsText\"},[_c('p',{staticClass:\"itemsTextP\"},[_vm._v(\"管理员审批\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"messageReported\">\r\n    \r\n    <div class=\"itemsText\">\r\n      <p class=\"itemsTextP\">管理员审批</p>\r\n    </div>\r\n\r\n    <div class=\"messageHeader\">\r\n      <!-- 损坏上报 -->\r\n      <el-badge :value=\"reportedMessage\" :max=\"99\" class=\"messageHeaderReported\">\r\n        <el-button type=\"success\">损坏上报</el-button>\r\n      </el-badge>\r\n      <!-- 资金审批 -->\r\n      <el-badge :value=\"assetsMessage\" :max=\"99\" class=\"messageHeaderAssets\">\r\n        <el-button type=\"info\" @click=\"gotoMessageAssets\">资金审批</el-button>\r\n      </el-badge>\r\n    </div>\r\n\r\n    <div class=\"messageReportedInner\">\r\n      <!-- 表格 -->\r\n      <el-table\r\n        class=\"reportedTable\" \r\n        ref=\"filterTable\"\r\n        :data=\"tableData\"\r\n        style=\"width: 100%\">\r\n        <!-- 上报信息id -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"sequenceId\"\r\n          label=\"上报信息id\">\r\n        </el-table-column>\r\n        <!-- 上报人id -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"reportNameId\"\r\n          label=\"上报人id\">\r\n        </el-table-column>\r\n        <!-- 上报人 -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"reportName\"\r\n          label=\"上报人\">\r\n        </el-table-column>\r\n        <!-- 物品id -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"goodsId\"\r\n          label=\"物品id\">\r\n        </el-table-column>\r\n        <!-- 物品名称 -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"goodsName\"\r\n          label=\"物品名称\"\r\n          :formatter=\"formatter\">\r\n        </el-table-column>\r\n        <!-- 状态 -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"goodsState\"\r\n          label=\"状态\"\r\n          :filters=\"[{ text: '未处理', value: '未处理' }]\"\r\n          filter-placement=\"bottom-end\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag\r\n              type=\"info\"\r\n              disable-transitions>{{scope.row.goodsState}}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 损坏描述信息 -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"damageDescription\"\r\n          label=\"损坏描述\">\r\n        </el-table-column> \r\n        <!-- 上报时间 -->\r\n        <el-table-column\r\n          align='center'\r\n          prop=\"reportTime\"\r\n          label=\"上报时间\"\r\n          sortable\r\n          width=\"160\"\r\n          column-key=\"reportTime\">\r\n        </el-table-column>\r\n        <!-- 处理操作 -->\r\n        <el-table-column label=\"处理\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"warning\"\r\n            @click=\"disposeButton(scope.$index, scope.row)\">处理</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 弹窗 -->\r\n      <el-dialog title=\"损坏物品处理\" :visible.sync=\"dialogFormVisibleEdit\" :append-to-body=\"true\" class=\"itemsDialog\">\r\n\r\n      <el-form :model=\"dispose\" :rules=\"rules\" ref=\"dispose\" class=\"demo-ruleForm\">\r\n\r\n        <el-form-item label=\"上报人\" prop=\"reportName\">\r\n          <el-input v-model=\"dispose.reportName\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"物品id\" prop=\"goodsId\">\r\n          <el-input v-model=\"dispose.goodsId\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"物品名字\" prop=\"goodsName\">\r\n          <el-input v-model=\"dispose.goodsName\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"上报人描述\" prop=\"damageDescription\">\r\n          <el-input type=\"textarea\" v-model=\"dispose.damageDescription\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"是否删除已损坏物品\" prop=\"goodsState\">\r\n          <el-radio-group v-model=\"dispose.goodsState\">\r\n            <el-radio label=\"是\"></el-radio>\r\n            <el-radio label=\"否\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"是否申请资金购买新物品\" prop=\"gotoApply\">\r\n          <el-radio-group v-model=\"dispose.gotoApply\">\r\n            <el-radio label=\"是\"></el-radio>\r\n            <el-radio label=\"否\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"处理人描述\" prop=\"disposeDescription\">\r\n          <el-input type=\"textarea\" v-model=\"dispose.disposeDescription\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-button type=\"primary\" @click=\"submitForm()\">提 交</el-button>\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisibleEdit = false\">关 闭</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    </div>\r\n\r\n     <!-- 分页 -->\r\n    <div class=\"pagination\">\r\n      <Pagination :total=\"total\" :totalPages=\"totalPages\" @currentChange=\"currentChange\"></Pagination>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { unprocessedReport,updateProcessedReport } from \"@/api/message/messageReported\"\r\nimport { itemsRemove } from '@/api/goods/goodsAdmin.js'\r\n// 节流\r\nimport { throttle } from 'lodash-es';\r\n// 分页\r\nimport Pagination from '@/components/pagination/Pagination';\r\nimport getUnprocessedReportNum from \"@/utils/getReportedMessage\"\r\nimport getUnprocessedAssetsNum from \"@/utils/getAssetsMessage\"\r\n// 时间戳处理\r\nimport dayjs from 'dayjs';\r\nexport default {\r\n  name: 'Message-MessageReported',\r\n  components:{Pagination,},\r\n\r\n  data() {\r\n    return {\r\n      // 列表\r\n      tableData: [],\r\n      // 处理信息\r\n      dispose: {\r\n        // 不可修改的框框\r\n        reportName: '',            // 上报人\r\n        goodsId: '',               // 物品id\r\n        goodsName: '',             // 物品名称\r\n        damageDescription: '',     // 上报人描述\r\n        gotoApply: '',             // 是否跳转\r\n        goodsState: '',            // 是否删除\r\n\r\n        // post的数据\r\n        sequenceId: '',            // 1上报信息id\r\n        disposeNameId: '',         // 1处理人id\r\n        disposeName: '',           // 1处理人姓名\r\n        disposeDescription: '',    // 1处理描述\r\n        disposeResult: '',         // 1处理状态判断\r\n      },\r\n      // 处理信息规则\r\n      rules: {\r\n        goodsState: [\r\n          { required: true, message: '请选择处理状态', trigger: 'change' }\r\n        ],\r\n        gotoApply: [\r\n          { required: true, message: '请选择是否跳转到申请资金', trigger: 'change' }\r\n        ],\r\n        disposeDescription: [\r\n          { required: true, message: '请填入处理描述', trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 关于页码\r\n      // 总共条数\r\n      total: 100,\r\n      // 页码数量\r\n      totalPages: 10,\r\n      // 当前页码有几个\r\n      pageSize: 7,\r\n      // 当前页码\r\n      pageNum: 1,\r\n      // 控制弹窗\r\n      dialogFormVisibleEdit: false,\r\n      // 用于判断下面\r\n      role: '',\r\n      // 损坏上报未处理信息数\r\n      reportedMessage: '',\r\n      // 资金申请未处理信息数\r\n      assetsMessage: '',\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // [查询]未(待)处理物品损坏记录接口\r\n    async getUnprocessedReport(pageNum){\r\n      let res = await unprocessedReport({pageNum: pageNum})\r\n      console.log(\"未处理损坏物品数据-----\",res)\r\n      if(res.data){\r\n        // 列表赋值\r\n        this.tableData = [...res.data.data.list]\r\n        this.total = res.data.data.total\r\n        this.totalPages = res.data.data.pages\r\n        this.tableData.forEach( e => {\r\n          e.reportTime = dayjs(e.reportTime).format(\"YYYY-MM-DD HH:mm:ss\");\r\n        })\r\n      }\r\n    },\r\n\r\n    // [更新]管理员处理(未处理的)损坏记录信息接口\r\n    async postUpdateProcessedReport(sequenceId,disposeNameId,disposeName,disposeDescription){\r\n      let res = await updateProcessedReport({sequenceId: sequenceId,disposeNameId: disposeNameId,disposeName: disposeName,disposeDescription :disposeDescription})\r\n      console.log(\"审批损坏结果-----\",res)\r\n      if(res.state === 200){\r\n        this.$message({\r\n          type: 'success',\r\n          message: '审批成功咯!',\r\n        })\r\n        // 重新获取列表\r\n        this.getUnprocessedReport(1)\r\n      }\r\n    },\r\n\r\n    // 删除接口\r\n    async getItemsRemove(id){\r\n      let res = await itemsRemove({goodsId: id})\r\n      console.log(\"产品删除数据-----\",res)\r\n      if(res.status === 200){\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功咯!'\r\n        })\r\n      }\r\n    },\r\n\r\n    // 上报提交操作\r\n    submitForm(){\r\n      this.$refs.dispose.validate((valid) => {\r\n        if (valid) {\r\n          console.log(\"处理提交按钮-----\",this.dispose);\r\n          this.dispose.disposeNameId = Number(this.dispose.disposeNameId)\r\n          this.postUpdateProcessedReport(this.dispose.sequenceId,this.dispose.disposeNameId,this.dispose.disposeName,this.dispose.disposeDescription)\r\n          // 触发弹窗\r\n          this.dialogFormVisibleEdit = false\r\n          if( this.dispose.goodsState === \"是\" ){\r\n            // 调用物品损坏上报的删除接口\r\n            console.log(\"调用物品损坏上报删除接口-----\");\r\n            this.getItemsRemove(this.dispose.goodsId)\r\n          }\r\n          if( this.dispose.gotoApply === \"是\" ){\r\n            if( this.role === \"user\" ){\r\n              this.$router.push({ name:\"user_shenqing\" })\r\n            }else if( this.role === \"admin\" ){\r\n              this.$router.push({ name:\"admin_shenqing\" })\r\n            }\r\n          }\r\n\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n        setTimeout(() => {\r\n          this.getUnprocessedReport(1) \r\n        }, 500);\r\n      });\r\n    },\r\n    // table处理按钮\r\n    disposeButton(index, row){\r\n      console.log(\"处理操作-----\",index, row); \r\n      // 触发弹窗\r\n      this.dialogFormVisibleEdit = true\r\n      // 将弹窗标题修改\r\n      this.dialogFormVisibleTitle = \"物品损坏处理\"\r\n      // 往表单填展示数据(不可修改的)\r\n      this.dispose.reportName =  row.reportName               // 上报人\r\n      this.dispose.goodsId = row.goodsId                      // 物品id\r\n      this.dispose.goodsName = row.goodsName                  // 物品名称\r\n      this.dispose.damageDescription = row.damageDescription  // 上报人描述\r\n\r\n      // 往表单填数据(不显示出来但是要post的)\r\n      this.dispose.sequenceId = row.sequenceId                    // 上报信息id\r\n      this.dispose.disposeNameId = this.$store.state.login.id     // 处理人id\r\n      this.dispose.disposeName = this.$store.state.login.name     // 处理人姓名\r\n      this.dispose.disposeDescription = \"\"                        // 处理描述变空\r\n\r\n    },\r\n    // 更新页码\r\n    currentChange(val){\r\n      console.log(\"更新页码-----\",val);\r\n      this.pageNum = val\r\n      this.getUnprocessedReport(val)\r\n    },\r\n    // 上报列表函数\r\n    formatter(row, column) {\r\n      return row.goodsName;\r\n    },\r\n\r\n    // 跳转资金审批\r\n    gotoMessageAssets: throttle(function(){\r\n      this.$router.push({ name:\"admin_message_assets\" }).catch(err => err)\r\n    },1500),\r\n  },\r\n\r\n  created() {\r\n    // 获取未处理损坏物品列表数据操作\r\n    this.getUnprocessedReport(1)\r\n  },\r\n  mounted() {\r\n    getUnprocessedReportNum().then( resReported => {\r\n      console.log(\"resReported\",resReported);\r\n      this.reportedMessage = resReported.data.data\r\n    } )\r\n    \r\n    getUnprocessedAssetsNum().then( resAssets => {\r\n      console.log(\"resAssets\",resAssets);\r\n      this.assetsMessage = resAssets.data.data\r\n    })\r\n\r\n    this.role = this.$store.state.login.role\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .messageReported{\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(255, 255, 255, 0.6);\r\n    overflow-y: scroll;\r\n  }\r\n  .itemsText{\r\n    font-size: 38px;\r\n    margin-bottom: 20px;\r\n    padding-top: 2px;\r\n    padding-bottom: 3px;\r\n    background-color: #e0dbdb;\r\n    font-weight: bold;\r\n    color: gray;\r\n    text-align: center;\r\n    position: fixed;\r\n    width: 100%;\r\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;\r\n    z-index: 1;\r\n  }\r\n  .messageHeader{\r\n    margin-top: 85px;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n  }\r\n  .el-badge{\r\n    transform: scale(1.5);\r\n  }\r\n  .messageReportedInner{\r\n    width: 80%;\r\n    font-size: 25px;\r\n    margin: 80px;\r\n    margin-top: 20px;\r\n  }\r\n  .reportedTable{\r\n    background-color: transparent;\r\n    border-radius: 15px;\r\n  }\r\n  ::v-deep .el-table th,\r\n  ::v-deep .el-table tr,\r\n  ::v-deep .el-table td {\r\n    background-color: rgba(255, 255, 255, 0.281) !important;\r\n  }\r\n  /* 去除底部白线 */\r\n  .el-table::before{\r\n    background-color: transparent;\r\n  }\r\n  .dialog-footer{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .pagination{\r\n    background-color: rgba(255, 255, 255, 0.815) !important;\r\n  }\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageReported.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageReported.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageReported.vue?vue&type=template&id=536070db&scoped=true&\"\nimport script from \"./MessageReported.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageReported.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageReported.vue?vue&type=style&index=0&id=536070db&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"536070db\",\n  null\n  \n)\n\nexport default component.exports","// 对API进行统一管理\r\nimport requests from \"@/utils/requests\";\r\nimport qs from 'qs'\r\n\r\n// Vuex里在action中\r\n// async userLogin({commit},data){\r\n//   let result = await reqUserLogin(data)\r\n// }\r\n\r\n\r\n// 物品页面\r\n\r\nconst url = \"/admin/admgoods\"\r\n\r\n// goods类\r\n// Integer goodsId;     需要传int类型的id\r\n// String goodsName;\t  需要String类型的名称\r\n// String goodsState;\t  需要String类型的状态\r\n// String goodsImage;\t  这个是图片的url，你不需要给我传\r\n\r\n\r\n// 展示物品\r\n/**\r\n * @URL /admin/admgoods/getAllGoods\r\n * @method post\r\n * @param 页码pageNum,当前页码有几个pageSize\r\n */\r\nexport const itemsList = ({pageNum,pageSize}) => {\r\n  return requests.post(url + \"/getAllGoods\",qs.stringify({\r\n      pageNum,\r\n      pageSize\r\n  }),{\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded'}\r\n  },{\r\n    responseType: 'arraybuffer',\r\n  });\r\n}\r\n\r\n// 增加物品\r\n/**\r\n * @URL /admin/admgoods/addGoods\r\n * @method post\r\n * @param 第一个参数uploadImage是用input获取的文件，第二个参数名字是goods，他是一个Goods类\r\n */\r\nexport const itemsAdd = ({formData}) => {\r\n  return requests.post(url + \"/addGoods\", {\r\n      uploadImage: formData.get(\"uploadImage\"),\r\n      goodsName: formData.get(\"goodsName\"),\r\n      goodsQuantity: formData.get(\"goodsQuantity\"),\r\n      goodsState: formData.get(\"goodsState\"),\r\n    }, {\r\n      headers: { \"Content-type\": \"multipart/form-data\" }\r\n  });\r\n}\r\n\r\n\r\n// 修改物品\r\n/**\r\n * @URL /admin/admgoods/updateGoods\r\n * @method post\r\n * @param 第一个参数uploadImage是用input获取的文件，第二个参数名字是goods，他是一个Goods类\r\n */\r\nexport const itemsEdit = ({formData}) => {\r\n  return requests.post(url + \"/updateGoods\", {\r\n    uploadImage: formData.get(\"uploadImage\"),\r\n    goodsId: formData.get(\"goodsId\"),\r\n    goodsName: formData.get(\"goodsName\"),\r\n    goodsState: formData.get(\"goodsState\"),\r\n  }, {\r\n    headers: { \"Content-type\": \"multipart/form-data\" }\r\n  });\r\n}\r\n\r\n// 根据物品名查询上报信息\r\n/**\r\n * @URL /admin/admgoods/selectGoodsByGoodsName\r\n * @method get\r\n * @param pageNum,pageSize,goodsName\r\n */\r\nexport const searchByGoodsNameFunc = ({pageNum,pageSize,goodsName}) => {\r\n  return requests.post(url + \"/selectGoodsByGoodsName\",qs.stringify({\r\n      pageNum,\r\n      pageSize,\r\n      goodsName,\r\n  }),{\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded'}\r\n  },{\r\n    responseType: 'arraybuffer',\r\n  });\r\n}\r\n\r\n// 根据物品id查询上报信息\r\n/**\r\n * @URL /admin/admgoods/selectGoodsById\r\n * @method get\r\n * @param goodsId\r\n */\r\nexport const searchByGoodsIdFunc = ({goodsId}) => {\r\n  return requests.post(url + \"/selectGoodsById\",qs.stringify({\r\n    goodsId,\r\n  }),{\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded'}\r\n  });\r\n}\r\n\r\n\r\n// 删除物品\r\n/**\r\n * @URL /admin/admgoods/deleteGoods\r\n * @method get\r\n * @param goodsId\r\n */\r\nexport const itemsRemove = ({goodsId}) => {\r\n  return requests.get(url + \"/deleteGoods\",{\r\n    params: {\r\n      goodsId\r\n    }\r\n  });\r\n}"],"names":["render","_vm","this","_c","_self","staticClass","_m","attrs","reportedMessage","_v","assetsMessage","on","gotoMessageAssets","ref","staticStyle","tableData","formatter","text","value","scopedSlots","_u","key","fn","scope","_s","row","goodsState","$event","disposeButton","$index","dialogFormVisibleEdit","dispose","rules","model","reportName","callback","$$v","$set","expression","goodsId","goodsName","damageDescription","gotoApply","disposeDescription","submitForm","slot","total","totalPages","currentChange","staticRenderFns","name","components","Pagination","data","sequenceId","disposeNameId","disposeName","disposeResult","required","message","trigger","pageSize","pageNum","role","methods","getUnprocessedReport","res","unprocessedReport","console","log","list","pages","forEach","e","reportTime","dayjs","format","postUpdateProcessedReport","updateProcessedReport","state","$message","type","getItemsRemove","id","itemsRemove","status","$refs","validate","valid","Number","$router","push","setTimeout","index","dialogFormVisibleTitle","$store","login","val","column","throttle","catch","err","created","mounted","getUnprocessedReportNum","then","resReported","getUnprocessedAssetsNum","resAssets","component","url","itemsList","requests","post","qs","headers","responseType","itemsAdd","formData","uploadImage","get","goodsQuantity","itemsEdit","searchByGoodsNameFunc","searchByGoodsIdFunc","params"],"sourceRoot":""}