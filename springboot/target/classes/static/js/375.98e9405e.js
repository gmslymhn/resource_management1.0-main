"use strict";(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[375],{2095:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"checkItems"},[e._m(0),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisibleReported,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisibleReported=t}}},[t("el-form",{ref:"report",staticClass:"demo-ruleForm",attrs:{model:e.report,rules:e.rules}},[t("el-form-item",{attrs:{label:"上报人id",prop:"reportNameId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.reportNameId,callback:function(t){e.$set(e.report,"reportNameId",t)},expression:"report.reportNameId"}})],1),t("el-form-item",{attrs:{label:"上报人姓名",prop:"reportName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.reportName,callback:function(t){e.$set(e.report,"reportName",e._n(t))},expression:"report.reportName"}})],1),t("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.report.goodsId,callback:function(t){e.$set(e.report,"goodsId",e._n(t))},expression:"report.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.report.damageDescription,callback:function(t){e.$set(e.report,"damageDescription",t)},expression:"report.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormReport("rules")}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleReported=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"checkItemsInner"},[t("div",{staticClass:"checkItemsInnerHeader"},[t("div",{staticClass:"inputDiv"},[t("el-input",{attrs:{size:"mini",placeholder:"物品id搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByGoodsIdFunc.apply(null,arguments)}},model:{value:e.searchByGoodsId,callback:function(t){e.searchByGoodsId=t},expression:"searchByGoodsId"}})],1),t("div",{staticClass:"inputDiv"},[t("el-input",{attrs:{size:"mini",placeholder:"物品名搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByGoodsNameFunc.apply(null,arguments)}},model:{value:e.searchByGoodsName,callback:function(t){e.searchByGoodsName="string"===typeof t?t.trim():t},expression:"searchByGoodsName"}})],1),t("el-button",{staticClass:"seeAll",attrs:{type:"primary",round:""},on:{click:e.seeAll}},[e._v("查看全部")])],1),t("el-table",{staticClass:"itemsTable",attrs:{data:e.tableData,border:"",align:"center","header-cell-style":{"text-align":"center"}}},[t("el-table-column",{attrs:{width:"100px",prop:"goodsId",label:"物品id",align:"center"}}),t("el-table-column",{attrs:{prop:"goodsImage",label:"物品照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"200px","max-height":"200px","object-fit":"contain"},attrs:{src:e.row.goodsImage}})]}}])}),t("el-table-column",{attrs:{width:"100px",prop:"goodsName",label:"物品名称",align:"center"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsState",label:"物品状态",filters:[{text:"未损坏",value:"未损坏"},{text:"已损坏",value:"已损坏"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"未损坏"===a.row.goodsState?"info":"danger","disable-transitions":""}},[e._v(e._s(a.row.goodsState))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.damageReportFromItems(a.$index,a.row)}}},[e._v("损坏上报")])]}}])})],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,pageSize:e.pageSize,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品展示")])])}],r=a(4615),i=a(4458),l=a(4974),d=a(129),n=a.n(d);const p="/user/usegoods",g=({pageNum:e,pageSize:t})=>l.Z.post(p+"/getAllGoods",n().stringify({pageNum:e,pageSize:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),c=({goodsId:e})=>l.Z.post(p+"/selectGoodsById",n().stringify({goodsId:e}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"}),m=({pageNum:e,pageSize:t,goodsName:a})=>l.Z.post(p+"/selectGoodsByGoodsName",n().stringify({pageNum:e,pageSize:t,goodsName:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{responseType:"arraybuffer"});var u=a(7008),h={goodsName:"Content-CheckItems",components:{Pagination:i.Z},data(){return{formLabelWidth:"120px",tableData:[],dialogFormVisibleAdd:!1,dialogFormVisibleTitle:"",report:{reportNameId:"",reportName:"",goodsId:"",damageDescription:""},searchByGoodsName:"",searchByGoodsId:"",dialogFormVisibleReported:!1,fileList:[],rules:{goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],goodsQuantity:[{required:!0,message:"请输入物品数量",trigger:"blur"}],goodsState:[{required:!0,message:"请选择物品状态",trigger:"change"}],goodsImage:[{required:!0,message:"请上传图片",trigger:"change"}]},total:0,totalPages:10,pageSize:5,pageNum:1}},methods:{async getItemsList(e,t){let a=await g({pageNum:e,pageSize:t});console.log("产品列表数据-----",a),a.data?(this.tableData=[...a.data.data.list],this.total=a.data.data.total,this.totalPages=a.data.totalPages,this.tableData.forEach(((e,t)=>{e.goodsImage="data:image/png;base64,"+a.data.responseEntityList[t].body}))):(this.tableData=[],this.total=0,this.totalPages=0)},async postDamageReported(e){let t=await(0,u.K$)({items:e});console.log("上报提交-----",t),1===t.data?(this.$message({type:"success",message:"上报成功咯!"}),this.dialogFormVisibleReported=!1,this.report.goodsId="",this.report.damageDescription="",this.getItemsList(1,this.pageSize)):0===t.data&&(this.$message({type:"error",message:"上报失败呜呜呜!"}),this.dialogFormVisibleReported=!1,this.report.goodsId="",this.report.damageDescription="",this.getItemsList(1,this.pageSize))},async getSearchByGoodsNameFunc(e,t,a){let o=await m({pageNum:e,pageSize:t,goodsName:a});console.log("上报人搜索数据-----",o),o.data?(this.tableData=[...o.data.data.list],this.tableData.forEach(((e,t)=>{e.goodsImage="data:image/png;base64,"+o.data.responseEntityList[t].body})),this.total=o.data.data.total,this.totalPages=o.data.totalPages,this.pageNum=1):(this.tableData=[],this.total=0,this.totalPages=0)},async getSearchByGoodsIdFunc(e){let t=await c({goodsId:e});console.log("物品id搜索数据-----",t),t.data?(this.tableData=[...t.data.data.list],this.tableData.forEach(((e,a)=>{e.goodsImage="data:image/png;base64,"+t.data.responseEntityList[a].body})),this.total=1,this.totalPages=1,this.pageNum=1):(this.tableData=[],this.total=0,this.totalPages=0)},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getItemsList(e,this.pageSize)},damageReportFromItems(e,t){console.log("上报弹窗展开",e,t),this.dialogFormVisibleReported=!0,this.report.goodsId=t.goodsId},submitFormReport(){this.$refs.report.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.report),this.postDamageReported(this.report)}))},searchByGoodsNameFunc:(0,r.Z)((function(){this.searchByGoodsName&&(console.log("我要搜索咯-----",this.searchByGoodsName),this.getSearchByGoodsNameFunc(this.pageNum,this.pageSize,this.searchByGoodsName))}),300),searchByGoodsIdFunc:(0,r.Z)((function(){this.searchByGoodsId&&(console.log("我要搜索咯-----",this.searchByGoodsId),this.getSearchByGoodsIdFunc(this.searchByGoodsId))}),300),seeAll(){this.getItemsList(1,this.pageSize),this.searchByGoodsName="",this.searchByGoodsId=""},filterTag(e,t){return t.goodsState===e}},created(){this.getItemsList(1,this.pageSize)},mounted(){this.report.reportName=this.$store.state.login.name,this.report.reportNameId=Number(this.$store.state.login.id)}},y=h,f=a(1001),b=(0,f.Z)(y,o,s,!1,null,"60fe1356",null),I=b.exports},7008:function(e,t,a){a.d(t,{Hv:function(){return i},K$:function(){return l},nq:function(){return d},up:function(){return r}});var o=a(4974);a(129);const s="/user/useReport",r=({pageNum:e,pageSize:t})=>o.Z.get(s+"/getALLReport",{params:{pageNum:e,pageSize:t}}),i=({pageNum:e,pageSize:t,reportName:a})=>o.Z.get(s+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:a}}),l=({items:e})=>o.Z.get(s+"/addReport",{params:{reportNameId:e.reportNameId,reportName:e.reportName,goodsId:e.goodsId,damageDescription:e.damageDescription}}),d=({sequenceId:e})=>o.Z.get(s+"/deleteReport",{params:{sequenceId:e}})}}]);
//# sourceMappingURL=375.98e9405e.js.map