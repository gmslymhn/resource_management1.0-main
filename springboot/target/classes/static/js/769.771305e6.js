"use strict";(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[769],{3769:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"poster"}},[e("el-form",{ref:"loginForm",staticClass:"loginContainer",attrs:{model:t.loginForm}},[e("h3",{staticClass:"loginTitle"},[t._v(" 系统登录 ")]),t.isLoginFail?e("el-alert",{attrs:{title:"登陆失败",type:"error",description:"请检查账号密码是否正确","show-icon":""}}):t._e(),e("el-form-item",{attrs:{label:""}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入账号",clearable:""},model:{value:t.loginForm.loginName,callback:function(e){t.$set(t.loginForm,"loginName",e)},expression:"loginForm.loginName"}})],1),e("el-form-item",{attrs:{label:""}},[e("el-input",{attrs:{autocomplete:"off",placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.LoginButton.apply(null,arguments)}},model:{value:t.loginForm.loginPassword,callback:function(e){t.$set(t.loginForm,"loginPassword",e)},expression:"loginForm.loginPassword"}})],1),e("div",{staticClass:"tool"},[e("div"),e("div",[e("span",{staticClass:"forgetPassword",on:{click:t.open2}},[t._v("忘记密码？")])])]),e("el-form-item",{staticClass:"button"},[e("el-button",{staticClass:"button1",attrs:{type:"danger",round:""},on:{click:t.LoginButton}},[t._v("登录")]),e("el-button",{attrs:{type:"info",round:""},on:{click:t.toRegister}},[t._v("注册")])],1)],1)],1)},a=[],i=(o(7658),o(4858)),n=o(4974);const r="/abc/login",l=({useraccount:t,password:e})=>n.Z.post(r,{useraccount:t,password:e},{headers:{"Content-Type":"application/x-www-form-urlencoded"}});var c={name:"App-Login",data(){return{loginForm:{loginName:"",loginPassword:""},checked:!1,isLoginFail:!1}},methods:{LoginButton(){l({useraccount:this.loginForm.loginName,password:this.loginForm.loginPassword}).then((t=>{console.log("用户信息-----",t),1===t.data.code?(i.Z.set("token",t.data.data.token),this.$store.dispatch("login/setAccount",t.data.data.account),this.$store.dispatch("login/setId",t.data.data.id),this.$store.dispatch("login/setName",t.data.data.name),this.$store.dispatch("login/setRole",t.data.role),this.$store.dispatch("login/setToken",t.data.data.token),this.$message({showClose:!0,type:"success",message:"成功登录！喜欢您来"}),"admin"===t.data.role?this.$router.replace("/admin"):"user"===t.data.role&&this.$router.replace("/user")):(this.loginForm={},this.isLoginFail=!0)}))},toRegister(){this.$router.push({path:"/register"})},remenber(t){this.checked=t,this.checked?localStorage.setItem("news",JSON.stringify(this.form)):localStorage.removeItem("news")},open2(){this.$message({showClose:!0,type:"success",message:"恭喜你忘记了密码！(蒸乌鱼😥)"})}}},d=c,u=o(1001),g=(0,u.Z)(d,s,a,!1,null,"af675402",null),m=g.exports}}]);
//# sourceMappingURL=769.771305e6.js.map