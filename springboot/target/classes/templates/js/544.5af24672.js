(self["webpackChunkresource"]=self["webpackChunkresource"]||[]).push([[544],{7027:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"damageReported"},[e._m(0),t("div",{staticClass:"damageReportedInner"},[[t("div",{staticClass:"damageReportedInnerHeader"},[t("el-button",{on:{click:e.clearFilter}},[e._v("重置状态筛选")]),t("el-input",{attrs:{size:"mini",placeholder:"上报人搜索(回车)"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchByReportNameFuncButton.apply(null,arguments)}},model:{value:e.searchByReportName,callback:function(t){e.searchByReportName="string"===typeof t?t.trim():t},expression:"searchByReportName"}}),t("el-button",{staticClass:"seeAll",attrs:{type:"primary",round:""},on:{click:e.seeAll}},[e._v("查看全部")])],1),t("el-table",{ref:"filterTable",staticClass:"itemsTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{width:"100px",align:"center",prop:"sequenceId",label:"上报信息id"}}),t("el-table-column",{attrs:{width:"160px",align:"center",prop:"reportTime",label:"上报时间",sortable:"","column-key":"reportTime"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"reportName",label:"上报人"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsId",label:"物品id"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsName",label:"物品名称",formatter:e.formatter}}),t("el-table-column",{attrs:{align:"center",prop:"damageDescription",label:"损坏描述"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"goodsState",label:"状态",filters:[{text:"未处理",value:"未处理"},{text:"已处理",value:"已处理"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{type:e.tagColor(r),"disable-transitions":""}},[e._v(e._s(r.row.goodsState))])]}}])}),t("el-table-column",{attrs:{width:"160px",align:"center",prop:"processTime",label:"处理时间",sortable:"","column-key":"processTime"}}),t("el-table-column",{attrs:{width:"100px",align:"center",prop:"disposeName",label:"处理人"}}),e.userSearchSelf?t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.$index,r.row)}}},[e._v("删除")])]}}],null,!1,3778300450)}):e._e()],1)]],2),t("el-dialog",{staticClass:"itemsDialog",attrs:{title:"上报",visible:e.dialogFormVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"items",staticClass:"demo-ruleForm",attrs:{model:e.items,rules:e.rules}},[t("el-form-item",{attrs:{label:"上报人id",prop:"reportNameId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.items.reportNameId,callback:function(t){e.$set(e.items,"reportNameId",t)},expression:"items.reportNameId"}})],1),t("el-form-item",{attrs:{label:"上报人姓名",prop:"reportName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.items.reportName,callback:function(t){e.$set(e.items,"reportName",e._n(t))},expression:"items.reportName"}})],1),t("el-form-item",{attrs:{label:"物品id",prop:"goodsId"}},[t("el-input",{model:{value:e.items.goodsId,callback:function(t){e.$set(e.items,"goodsId",e._n(t))},expression:"items.goodsId"}})],1),t("el-form-item",{attrs:{label:"损坏描述",prop:"damageDescription"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.items.damageDescription,callback:function(t){e.$set(e.items,"damageDescription",t)},expression:"items.damageDescription"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("rules")}}},[e._v("上 报")])],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)],1),t("div",{staticClass:"pagination"},[t("Pagination",{attrs:{total:e.total,totalPages:e.totalPages},on:{currentChange:e.currentChange}})],1)],1)},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemsText"},[t("p",{staticClass:"itemsTextP"},[e._v("物品损坏上报")])])}],o=r(4615),i=r(4458),n=r(7814),u=r(7008),c=r(7484),d=r.n(c),l={name:"Content-DamageReported",components:{Pagination:i.Z},data(){return{tableData:[{sequenceId:1,reportTime:"2023-07-02 03:29:33",reportName:"门酱",goodsId:1,goodsName:"物品名字",damageDescription:"描述",goodsState:"未处理",processTime:"2023-08-01 06:30:55",disposeName:"无"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-01 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"已同理未处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-03 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"已处理",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"},{sequenceId:1,reportTime:"2023-07-04 03:29:33",reportName:"门酱",goodsName:"物品名字",damageDescription:"描述",goodsId:1,goodsState:"未同意",processTime:"2023-08-01 06:30:55",disposeName:"袁笙"}],items:{reportNameId:"",reportName:"",goodsId:"",damageDescription:""},searchByReportName:"",total:0,totalPages:10,pageSize:10,pageNum:1,dialogFormVisible:!1,userSearchSelf:!1,rules:{goodsId:[{required:!0,message:"请输入物品id",trigger:"blur"}],goodsName:[{required:!0,message:"请输入物品名称",trigger:"blur"}],damageDescription:[{required:!0,message:"请输入损坏描述",trigger:"blur"}]}}},methods:{async getReportList(e,t){let r=await(0,u.up)({pageNum:e,pageSize:t});console.log("上报列表数据-----",r),r.data&&(this.tableData=[...r.data.data.list],this.total=r.data.data.total,this.totalPages=r.data.data.pages,this.tableData.forEach((e=>{e.reportTime=d()(e.reportTime).format("YYYY-MM-DD HH:mm:ss")})),this.tableData.forEach((e=>{e.processTime=d()(e.processTime).format("YYYY-MM-DD HH:mm:ss")})))},async postDamageReported(e){let t=await(0,u.K$)({items:e});console.log("上报提交-----",t),200===t.status&&(this.$message({type:"success",message:"提交成功咯!"}),this.dialogFormVisible=!1,this.items.goodsId="",this.items.damageDescription="",this.getReportList(1,this.pageSize))},async getSearchByReportNameFunc(e,t,r){let s=await(0,u.Hv)({pageNum:e,pageSize:t,reportName:r});console.log("上报人搜索数据-----",s),this.tableData=[...s.data.data.list],this.total=s.data.data.total,this.totalPages=s.data.data.pages,this.tableData.forEach((e=>{e.reportTime=d()(e.reportTime).format("YYYY-MM-DD HH:mm:ss")})),this.tableData.forEach((e=>{e.processTime=d()(e.processTime).format("YYYY-MM-DD HH:mm:ss")}))},async getDeleteGoods(e){let t=await(0,u.nq)({sequenceId:e});console.log("删除数据-----",t),200===t.status&&(this.$message({type:"success",message:"删除成功咯!"}),this.getReportList(1,this.pageSize))},searchByReportNameFuncButton:(0,o.Z)((function(){this.searchByReportName&&(this.getSearchByReportNameFunc(this.pageNum,this.pageSize,this.searchByReportName),this.reportName===this.$store.state.login.name?this.userSearchSelf=!0:this.userSearchSelf=!1)}),300),seeAll(){this.getReportList(1,this.pageSize),this.searchByReportName="",this.searchByDisposeName=""},submitForm(){this.$refs.items.validate((e=>{if(!e)return console.log("error submit!!"),!1;console.log("上报提交按钮-----",this.items),this.postDamageReported(this.items)}))},reportedListButton(){this.dialogFormVisible=!0},handleDelete(e,t){this.$confirm("此操作将删除该上报数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.getDeleteGoods(t.sequenceId)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},currentChange(e){console.log("更新页码-----",e),this.pageNum=e,this.getReportList(e,this.pageSize)},formatter(e,t){return e.goodsName},filterTag(e,t){return t.goodsState===e},clearFilter(){this.$refs.filterTable.clearFilter()},tagColor(e){return"未处理"===e.row.goodsState?"info":"已处理"===e.row.goodsState?"success":void 0}},created(){this.getReportList(this.pageNum,this.pageSize)},mounted(){(0,n.Z)(this),this.items.reportName=this.$store.state.login.name,this.items.reportNameId=Number(this.$store.state.login.id)}},m=l,p=r(1001),g=(0,p.Z)(m,s,a,!1,null,"662efbe0",null),h=g.exports},7484:function(e){!function(t,r){e.exports=r()}(0,(function(){"use strict";var e=1e3,t=6e4,r=36e5,s="millisecond",a="second",o="minute",i="hour",n="day",u="week",c="month",d="quarter",l="year",m="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},N=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},$={s:N,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+N(s,2,"0")+":"+N(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(s,c),o=r-a<0,i=t.clone().add(s+(o?-1:1),c);return+(-(s+(r-a)/(o?a-i:i-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:u,d:n,D:m,h:i,m:o,s:a,ms:s,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",D={};D[b]=f;var y=function(e){return e instanceof I},S=function e(t,r,s){var a;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();D[o]&&(a=o),r&&(D[o]=r,a=o);var i=t.split("-");if(!a&&i.length>1)return e(i[0])}else{var n=t.name;D[n]=t,a=n}return!s&&a&&(b=a),a||!s&&b},v=function(e,t){if(y(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new I(r)},T=$;T.l=S,T.i=y,T.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function f(e){this.$L=S(e.locale,null,!0),this.parse(e)}var N=f.prototype;return N.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(T.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(g);if(s){var a=s[2]-1||0,o=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)):new Date(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},N.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},N.$utils=function(){return T},N.isValid=function(){return!(this.$d.toString()===p)},N.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},N.isAfter=function(e,t){return v(e)<this.startOf(t)},N.isBefore=function(e,t){return this.endOf(t)<v(e)},N.$g=function(e,t,r){return T.u(e)?this[t]:this.set(r,e)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(e,t){var r=this,s=!!T.u(t)||t,d=T.p(e),p=function(e,t){var a=T.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return s?a:a.endOf(n)},g=function(e,t){return T.w(r.toDate()[e].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,f=this.$M,N=this.$D,$="set"+(this.$u?"UTC":"");switch(d){case l:return s?p(1,0):p(31,11);case c:return s?p(1,f):p(0,f+1);case u:var b=this.$locale().weekStart||0,D=(h<b?h+7:h)-b;return p(s?N-D:N+(6-D),f);case n:case m:return g($+"Hours",0);case i:return g($+"Minutes",1);case o:return g($+"Seconds",2);case a:return g($+"Milliseconds",3);default:return this.clone()}},N.endOf=function(e){return this.startOf(e,!1)},N.$set=function(e,t){var r,u=T.p(e),d="set"+(this.$u?"UTC":""),p=(r={},r[n]=d+"Date",r[m]=d+"Date",r[c]=d+"Month",r[l]=d+"FullYear",r[i]=d+"Hours",r[o]=d+"Minutes",r[a]=d+"Seconds",r[s]=d+"Milliseconds",r)[u],g=u===n?this.$D+(t-this.$W):t;if(u===c||u===l){var h=this.clone().set(m,1);h.$d[p](g),h.init(),this.$d=h.set(m,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},N.set=function(e,t){return this.clone().$set(e,t)},N.get=function(e){return this[T.p(e)]()},N.add=function(s,d){var m,p=this;s=Number(s);var g=T.p(d),h=function(e){var t=v(p);return T.w(t.date(t.date()+Math.round(e*s)),p)};if(g===c)return this.set(c,this.$M+s);if(g===l)return this.set(l,this.$y+s);if(g===n)return h(1);if(g===u)return h(7);var f=(m={},m[o]=t,m[i]=r,m[a]=e,m)[g]||1,N=this.$d.getTime()+s*f;return T.w(N,this)},N.subtract=function(e,t){return this.add(-1*e,t)},N.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var s=e||"YYYY-MM-DDTHH:mm:ssZ",a=T.z(this),o=this.$H,i=this.$m,n=this.$M,u=r.weekdays,c=r.months,d=r.meridiem,l=function(e,r,a,o){return e&&(e[r]||e(t,s))||a[r].slice(0,o)},m=function(e){return T.s(o%12||12,e,"0")},g=d||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s};return s.replace(h,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return T.s(t.$y,4,"0");case"M":return n+1;case"MM":return T.s(n+1,2,"0");case"MMM":return l(r.monthsShort,n,c,3);case"MMMM":return l(c,n);case"D":return t.$D;case"DD":return T.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return l(r.weekdaysMin,t.$W,u,2);case"ddd":return l(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(o);case"HH":return T.s(o,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return g(o,i,!0);case"A":return g(o,i,!1);case"m":return String(i);case"mm":return T.s(i,2,"0");case"s":return String(t.$s);case"ss":return T.s(t.$s,2,"0");case"SSS":return T.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(s,m,p){var g,h=this,f=T.p(m),N=v(s),$=(N.utcOffset()-this.utcOffset())*t,b=this-N,D=function(){return T.m(h,N)};switch(f){case l:g=D()/12;break;case c:g=D();break;case d:g=D()/3;break;case u:g=(b-$)/6048e5;break;case n:g=(b-$)/864e5;break;case i:g=b/r;break;case o:g=b/t;break;case a:g=b/e;break;default:g=b}return p?g:T.a(g)},N.daysInMonth=function(){return this.endOf(c).$D},N.$locale=function(){return D[this.$L]},N.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=S(e,t,!0);return s&&(r.$L=s),r},N.clone=function(){return T.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},f}(),M=I.prototype;return v.prototype=M,[["$ms",s],["$s",a],["$m",o],["$H",i],["$W",n],["$M",c],["$y",l],["$D",m]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),v.extend=function(e,t){return e.$i||(e(t,I,v),e.$i=!0),v},v.locale=S,v.isDayjs=y,v.unix=function(e){return v(1e3*e)},v.en=D[b],v.Ls=D,v.p={},v}))},7008:function(e,t,r){"use strict";r.d(t,{Hv:function(){return i},K$:function(){return n},nq:function(){return u},up:function(){return o}});var s=r(4974);r(129);const a="/user/useReport",o=({pageNum:e,pageSize:t})=>s.Z.get(a+"/getALLReport",{params:{pageNum:e,pageSize:t}}),i=({pageNum:e,pageSize:t,reportName:r})=>s.Z.get(a+"/selectByReportName",{params:{pageNum:e,pageSize:t,reportName:r}}),n=({items:e})=>s.Z.get(a+"/addReport",{params:{reportNameId:e.reportNameId,reportName:e.reportName,goodsId:e.goodsId,damageDescription:e.damageDescription}}),u=({sequenceId:e})=>s.Z.get(a+"/deleteReport",{params:{sequenceId:e}})}}]);
//# sourceMappingURL=544.5af24672.js.map